!function(l){l.su.moduleManager.define("quickSetupAp",{services:["moduleLoader","ajax","device","language","moduleManager"],deps:["main","navigatorController"],models:["language","quickSetupModel"],stores:["workModeStore","languageStore","quickSetupSteps"],views:["quickSetupApView"],listeners:{"ev_on_launch":function(e,t,n,o,u,i,a){t=this;var s=a.device.getLocale();u.languageStore.load({success:function(){t.lang=s,o.language.language.setValue(s),n.quickSetupApView.qsLanBtn.setText(o.language.language.getText())}}),t.initMode(),o.quickSetupModel.load({ajax:{async:!1},url:l.su.url("/admin/quick_setup?form=ap_setup")}),n.quickSetupApView.productName.setValue(a.device.getProductName()),u.quickSetupSteps.loadData(t.apSteps),this.goTo("qsWirelessSettingAp"),t.initModeSelectModule(),l.su.scrollbar({ele:".page-content-container"})}},init:function(t,n,o,e,u,i){this.configViews({id:"quickSetupApView"}),this.control({"#switch-mode-button":{"ev_button_click":function(e){n.quickSetupApView.switchModeMsg.show()}},"#quit-qs-button":{"ev_button_click":function(e){u.main.confirm(l.su.CHAR.QUICK_SETUP.QUIT_MSG1,function(){t.quit()},null,l.su.CHAR.QUICK_SETUP.QUIT_UPPER)}},"#qs-lan-cb":{"ev_view_change":function(e){i.language.switchTo(o.language.language.getValue())},"mouseenter":function(){l("#qs-lan-button").addClass("hover")},"mouseleave":function(){l("#qs-lan-button").removeClass("hover")}},".operation-mode-switch-msg":{"ev_msg_ok":function(e,t){var n=i.moduleManager.get("operationMode");n.modeChanged()&&(n.switchModeConfirm(),t.preventDefault())}}})}},function(o,t,e,n,u,i){o=this;var a=[],s="router",r="ap";return{"mode":null,"initMode":function(){switch(o.mode=i.device.getCurrentMode(),o.mode){case s:o.steps=o.routerSteps;case r:o.steps=o.apSteps}},"steps":null,"routerSteps":[{name:"qsSetTimezone"},{name:"qsChooseInternetType"},{name:"qsInternetEdit"},{name:"qsWirelessSetting"},{name:"qsSummary"},{name:"tpCloudService"}],"apSteps":[{name:"qsWirelessSettingAp"},{name:"qsSummaryAp"}],"updateSteps":function(n){l.each(o.steps,function(e,t){t&&t.name===n&&o.setStep(n)})},"currentStep":null,"_getChildModuleLoader":function(e){return t.quickSetupApView[e+"Loader"]},"setStep":function(e){t.quickSetupApView.steps.setValue(e)},"initModeSelectModule":function(){i.moduleLoader.load({module:"quickSetupAp"},{module:"operationMode",view:"operationModeViewQs"},t.quickSetupApView.operationModeLoader)},"goTo":function(e,t){o.currentStep&&o._getChildModuleLoader(o.currentStep).hide();var n=o._getChildModuleLoader(e);0<=l.inArray(e,a)&&!t||(i.moduleLoader.load({module:"quickSetupAp"},{module:e},n),0<=l.inArray(e,a)||a.push(e)),n.show(),o.currentStep=e,o.updateSteps(e)},"quit":function(){u.navigatorController.goTo("index")}}})}(jQuery);
!function(c){c.su.moduleManager.define("usbDevice",{services:["ajax"],stores:["storageStatusStore"],models:["sambaAccessModel","ftpAccessModel","sftpAccessModel","mediaAccessModel","timeMachineModel","printerModel"],views:["usbDeviceView"],listeners:{"ev_on_launch":function(e,s,t,o,a,i,c){this.storage_proxy_list=["diskListProxy","diskList2Proxy","diskList3Proxy"],this.scanDisk(),o.sambaAccessModel.load(),o.ftpAccessModel.load(),o.sftpAccessModel.load(),o.mediaAccessModel.load(),o.timeMachineModel.load(),o.printerModel.load(),a.storageStatusStore.load()}},init:function(e,s,o,t,a,i){this.configViews({id:"usbDeviceView",items:[{id:"storage-status-group",configs:{nameField:"name",fields:[{text:c.su.CHAR.USB_DEVICE.DOCUMENTS,dataIndex:"documents",color:"#0E6C7A"},{text:c.su.CHAR.USB_DEVICE.PHOTOS,dataIndex:"photos",color:"#00A3DF"},{text:c.su.CHAR.USB_DEVICE.MUSICS,dataIndex:"musics",color:"#40B324"},{text:c.su.CHAR.USB_DEVICE.VIDEOS,dataIndex:"videos",color:"#FFCB00"},{text:c.su.CHAR.USB_DEVICE.TIME,dataIndex:"timeMachine",color:"#C11C66"},{text:c.su.CHAR.USB_DEVICE.OTHERS,dataIndex:"others",color:"#5F48A3"},{text:c.su.CHAR.USB_DEVICE.AVAILABLE,dataIndex:"available",color:"#4ACBD6"}]}}]}),this.control({"#scan-device":{"ev_button_click":function(){this.scanDisk()}},"#remove-device":{"ev_button_click":function(){this.removeDisk()}}}),this.listen({"models.sambaAccessModel.enable":{"ev_value_change":function(e,s,t){o.sambaAccessModel.submit()}},"models.ftpAccessModel.enable":{"ev_value_change":function(e,s,t){o.ftpAccessModel.submit()}},"models.sftpAccessModel.enable":{"ev_value_change":function(e,s,t){o.sftpAccessModel.submit()}},"models.mediaAccessModel.enable":{"ev_value_change":function(e,s,t){o.mediaAccessModel.submit()}},"models.timeMachineModel.enable":{"ev_value_change":function(e,s,t){o.timeMachineModel.submit()}},"models.printerModel.enable":{"ev_value_change":function(e,s,t){o.printerModel.submit()}}})}},function(a,e,s,t,o,i){a=this;var c=[];return{scanDisk:function(e){i.ajax.request({proxy:"diskScanProxy",success:function(e){var s=e["number"],t=e.list;c=t;for(var o=0;o<s;o++)!function(s){i.ajax.request({proxy:a.storage_proxy_list[s],data:{serial:t[s].serial},ajax:{async:!1},success:function(e){c[s].num=s,c[s].volumnList=e}})}(o);a.renderData(0)},fail:function(e,s,t){},error:function(){}})},renderData:function(e){},removeDisk:function(){i.ajax.request({proxy:"diskRemoveProxy",data:{serial:c[0]["serial"]},success:function(e){a.scanDisk()},fail:function(e,s,t){},error:function(){}})}}})}(jQuery);
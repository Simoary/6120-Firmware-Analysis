!function(R){R.su.moduleManager.define("routingAdv",{services:["ajax"],models:["newRoutingModel","lanAdvLanModel"],stores:["staticRoutingStore","interfaceStore","routingTableStore"],views:["routingAdvView"],listeners:{ev_on_launch:function(t,e,n,a,i,o,s){this.unRegisterAutoSaveData([a.newRoutingModel,a.lanAdvLanModel,i.staticRoutingStore,i.interfaceStore,i.routingTableStore]),i.staticRoutingStore.load(),i.routingTableStore.load()}},init:function(u,t,d,r,e,n){this.configViews({id:"routingAdvView",items:[{id:"static-routing-grid",configs:{popEditor:{addTitle:R.su.CHAR.NETWORK_ROUTING.POPEDITOR_ADD_TITLE,editTitle:R.su.CHAR.NETWORK_ROUTING.POPEDITOR_EDIT_TITLE,content:"#static-routing-config",fields:[{name:"target"},{name:"netmask"},{name:"gateway"},{name:"interface"},{name:"name"}]},columns:[{text:R.su.CHAR.NETWORK_ROUTING.NETWORK_DESTINATION,dataIndex:"target",width:"19%"},{xtype:"customWidget",widgetName:"switch",text:R.su.CHAR.NETWORK_ROUTING.STATUS,dataIndex:"enable",cls:"status l-hide xl-hide",settings:{trueValue:"on",falseValue:"off"}},{text:R.su.CHAR.NETWORK_ROUTING.SUBNET_MASK,dataIndex:"netmask",width:"19%"},{text:R.su.CHAR.NETWORK_ROUTING.DEFAULT_GATEWAY,dataIndex:"gateway",width:"19%"},{text:R.su.CHAR.NETWORK_ROUTING.INTERFACE,dataIndex:"interface",width:"10%"},{text:R.su.CHAR.NETWORK_ROUTING.DESCRIPTION,dataIndex:"name"},{xtype:"customWidget",widgetName:"switch",text:R.su.CHAR.NETWORK_ROUTING.STATUS,dataIndex:"enable",cls:"status s-hide m-hide",settings:{trueValue:"on",falseValue:"off"},width:"8%"},{xtype:"settings",text:R.su.CHAR.NETWORK_ROUTING.MODIFY}]}},{id:"routing-table-grid",settings:{statusBarText:R.su.CHAR.NETWORK_ROUTING.ROUTING_NUM},configs:{columns:[{text:R.su.CHAR.NETWORK_ROUTING.NETWORK_DESTINATION,dataIndex:"dest",width:"28%"},{text:R.su.CHAR.NETWORK_ROUTING.SUBNET_MASK,dataIndex:"netmask",width:"28%"},{text:R.su.CHAR.NETWORK_ROUTING.GATEWAY,dataIndex:"gateway",width:"28%"},{text:R.su.CHAR.NETWORK_ROUTING.INTERFACE,dataIndex:"interface",renderer:function(t){return t.toUpperCase()}}]}}]}),this.control({"#routing-table-grid":{"ev_grid_tbar_refresh":function(t){r.routingTableStore.load({success:function(){R.su.moduleManager.query("main").showNotice(R.su.CHAR.COMMON.SAVED)}})}},"#static-routing-grid":{"ev_grid_edit":function(t,e){u.optkey=e},"ev_grid_before_save":function(t,e){for(var n=d.newRoutingModel.target.getValue(),a=d.newRoutingModel.netmask.getValue(),i=(d.newRoutingModel.gateway.getValue(),r.staticRoutingStore.getData()),o=0,s=i.length;o<s;o++){if((R.su.ipToInt(i[o].target)&R.su.ipToInt(i[o].netmask))==(R.su.ipToInt(n)&R.su.ipToInt(a))&&("add"===u.optkey||u.optkey!==i[o].key))return d.newRoutingModel.target.setError(R.su.CHAR.ERROR["00000107"]),e.preventDefault(),!1}}}}),this.listen({"stores.staticRoutingStore":{"ev_data_change":function(t,e,n){e.value!==e.oldValue&&"enable"===n.getName()&&r.staticRoutingStore.sync()}}})}},function(t,e,n,a,i,o){return{}})}(jQuery);
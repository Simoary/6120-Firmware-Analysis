!function(s){s.su.moduleManager.define("ipsec",{services:["ajax"],stores:["ipsecGridStore","tunnelAccessStore","keyExchangeStore","perfectForwardStore","authenAlgorithmStore","encryptionAlgorithmStore","autoModeStore","localIdentifierStore","remoteIdentifierStore","encryptionAlgorithmAdvStore","diffieStore","wanStore"],models:["ipsecModel","ipsecGridModel","lanAdvWanModel"],views:["ipsecView"],listeners:{"ev_on_launch":function(e,n,i,t,a,d,o){i.ipsecView.privateWanIpNote.hide(),t.ipsecModel.load(),a.ipsecGridStore.load(),a.wanStore.load({success:function(e){e.length<=1?t.ipsecGridModel.wan.hide():t.ipsecGridModel.wan.show()},fail:function(){t.ipsecGridModel.wan.hide()},error:function(){t.ipsecGridModel.wan.hide()}}),t.lanAdvWanModel.load({success:function(e){var i=t.lanAdvWanModel.getData();n.lanIpv4Ipaddr=i.lanIpv4Ipaddr,n.wanIpv4Ipaddr=i.wanIpv4Ipaddr,n.wanIpv4Pridns=i.wanIpv4Pridns||"",t.lanAdvWanModel.wanIpv4Ipaddr.disable(),t.lanAdvWanModel.wanIpv4Pridns.disable(),n.wanIpv4Ipaddr||t.lanAdvWanModel.wanIpv4Ipaddr.setError(s.su.CHAR.VPN_SERVER_IPSEC.NO_INTERNET_TIPS)}})}},init:function(e,i,t,a,n,d){this.configViews({id:"ipsecView",items:[{id:"grid-ipsec",configs:{popEditor:{addTitle:s.su.CHAR.VPN_SERVER_IPSEC.ADD_PROFILE,content:"#grid-ipsec-popEditor"},paging:{},columns:[{text:s.su.CHAR.VPN_SERVER_IPSEC.CONNECTION_NAME,dataIndex:"name"},{text:s.su.CHAR.VPN_SERVER_IPSEC.STATUS,dataIndex:"enable",xtype:"customWidget",widgetName:"switch",cls:"status l-hide xl-hide",settings:{trueValue:"on",falseValue:"off"}},{text:s.su.CHAR.VPN_SERVER_IPSEC.REMOTE_GATEWAY_URL,dataIndex:"remoteGateway"},{text:s.su.CHAR.VPN_SERVER_IPSEC.LOCAL_SUBNET_ADDRESS,dataIndex:"localSubnet"},{text:s.su.CHAR.VPN_SERVER_IPSEC.REMOTE_SUBNET_ADDRESS,dataIndex:"remoteSubnet"},{text:s.su.CHAR.VPN_SERVER_IPSEC.STATUS,dataIndex:"enable",xtype:"customWidget",widgetName:"switch",cls:"status s-hide m-hide",width:"10%",settings:{trueValue:"on",falseValue:"off"}},{xtype:"actioncolumn",text:s.su.CHAR.VPN_SERVER_IPSEC.MODIFY,renderer:function(e,i){return'<span class="icon"></span>','<span class="text"></span>',"</a>",'<a href="javascript:void(0)" class="grid-content-btn grid-content-btn-delete btn-delete">','<span class="icon"></span>','<span class="text"></span>',"</a>",'<a href="javascript:void(0)" class="grid-content-btn grid-content-btn-edit btn-edit"><span class="icon"></span><span class="text"></span></a><a href="javascript:void(0)" class="grid-content-btn grid-content-btn-delete btn-delete"><span class="icon"></span><span class="text"></span></a>'}}]}}]}),this.listen({"models.ipsecModel.enable":{"ev_value_change":function(e,i,n){n&&n!==i&&t.ipsecModel.submit()}},"models.ipsecGridModel.localTunnel":{"ev_value_change":function(e,i){var n=t.ipsecGridModel;"subnet"==i?(n.localIp.hide(),n.localSubnet.show(),n.localMask.show()):(n.localIp.show(),n.localSubnet.hide(),n.localMask.hide())}},"models.ipsecGridModel.remoteTunnel":{"ev_value_change":function(e,i){var n=t.ipsecGridModel;"subnet"==i?(n.remoteIp.hide(),n.remoteSubnet.show(),n.remoteMask.show()):(n.remoteIp.show(),n.remoteSubnet.hide(),n.remoteMask.hide())}},"models.ipsecGridModel.keyExchange":{"ev_value_change":function(e,i){var n=t.ipsecGridModel;"auto"==i?(n.preKey.show(),n.perfectForward.show(),n.encryptionAlgorithm.hide(),n.encryptionKey.hide(),n.authAlgorithm.hide(),n.authKey.hide(),n.spi.hide(),t.lanAdvWanModel.wanIpv4Ipaddr.show(),t.lanAdvWanModel.wanIpv4Pridns.show()):(n.preKey.hide(),n.perfectForward.hide(),n.encryptionAlgorithm.show(),n.encryptionKey.show(),n.authAlgorithm.show(),n.authKey.show(),n.spi.show(),t.lanAdvWanModel.wanIpv4Ipaddr.hide(),t.lanAdvWanModel.wanIpv4Pridns.hide())}},"models.ipsecGridModel.ikeMode":{"ev_value_change":function(e,i){var n=t.ipsecGridModel;"aggressive"!==i&&(n.ikeLocalIdentifierType.setValue("ip"),n.ikeRemoteIdentifierType.setValue("ip"))}},"models.ipsecGridModel.ikeLocalIdentifierType":{"ev_value_change":function(e,i){var n=t.ipsecGridModel;"fqdn"==i?(n.ikeMode.setValue("aggressive"),n.ikeLocalIdentifier.show()):n.ikeLocalIdentifier.hide()}},"models.ipsecGridModel.ikeRemoteIdentifierType":{"ev_value_change":function(e,i){var n=t.ipsecGridModel;"fqdn"==i?(n.ikeMode.setValue("aggressive"),n.ikeRemoteIdentifier.show()):n.ikeRemoteIdentifier.hide()}},"stores.ipsecGridStore":{"ev_data_change":function(e,i,n){i.value!=i.oldValue&&"enable"==n.getName()&&a.ipsecGridStore.sync()}}}),this.control({})}},function(e,i,n,t,a,d){return{}})}(jQuery);
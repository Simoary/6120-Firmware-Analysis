!function(u){u.su.moduleManager.define("quickSetup",{services:["moduleLoader","ajax","device","language","moduleManager"],deps:["main","navigatorController"],models:["language","quickSetupModel","qsSummaryModel"],stores:["workModeStore","languageStore","quickSetupSteps"],views:["quickSetupView"],listeners:{"ev_start_set_pwd":function(){this.onStartSetPwd()},"ev_end_set_pwd":function(){this.onEndSetPwd()},"ev_on_launch":function(e,t,n,s,i,a,o){t=this;u.su.scrollbar({ele:".page-content-container"}),s.quickSetupModel.toggleFields(!0);var r=o.device.getLocale();o.device.getForce()?(t.lang=r,n.quickSetupView.qsLanBtn.setText(u.su.CHAR.LANGUAGE[r.toUpperCase()]),s.language.language.disable()):i.languageStore.load({success:function(){t.lang=r,s.language.language.setValue(r),n.quickSetupView.qsLanBtn.setText(u.su.CHAR.LANGUAGE[r.toUpperCase()])}}),t.initMode(),s.quickSetupModel.load({success:function(){var e=s.qsSummaryModel.ispProfile.convert(s.quickSetupModel.ispSpecialMode.getValue());s.qsSummaryModel.ispProfile.setValue(e)}}),n.quickSetupView.productName.setValue(o.device.getProductName()),i.quickSetupSteps.loadData(t.routerSteps),a.main.upgraded?this.goTo("qsCloudAndTether"):this.goTo("qsSetTimezone"),t.initModeSelectModule(),t.checkPhysicalConn()}},init:function(n,t,e,s,i,a){this.configViews({id:"quickSetupView",items:[{id:"qs-set-password-loader",model:"qsSetPasswordLoader"},{id:"qs-choose-internet-type-loader",model:"qsChooseInternetTypeLoader"}]}),this.control({"#switch-mode-button":{"ev_button_click":function(e){t.quickSetupView.switchModeMsg.show()}},"#quit-qs-button":{"ev_button_click":function(e){var t=u.su.CHAR.QUICK_SETUP["QUIT_MSG"+n.exitMsgNum];i.main.confirm(t,function(){n.quit()},null,u.su.CHAR.QUICK_SETUP.QUIT_UPPER)}},"#qs-lan-cb":{"mouseenter":function(){u("#qs-lan-button").addClass("hover")},"mouseleave":function(){u("#qs-lan-button").removeClass("hover")},"ev_view_change":function(e,t){"clickLabel"==t.triggerAction&&a.language.switchTo(t.value)}},".operation-mode-switch-msg":{"ev_msg_ok":function(e,t){var n=a.moduleManager.get("operationMode");n.modeChanged()&&(n.switchModeConfirm(),t.preventDefault())}}}),this.listen({"views.quickSetupView.connectWorkMode":{"ev_value_change":function(e,t){}}})}},function(i,t,a,e,o,r){i=this;var p=[],n="router",l=!1,s={name:"qsSelectInternetPort"};return{upgradeDetail:null,noInternet:!0,skipFlag:!1,upgradeState:"noUpgrade","mode":null,exitMsgNum:1,"initMode":function(){switch(i.mode=r.device.getCurrentMode(),i.mode){case n:i.isSupportSetPort()&&i.routerSteps.splice(1,0,s),i.steps=i.routerSteps}},"steps":null,"routerSteps":[{name:"qsSetTimezone"},{name:"qsChooseInternetType"},{name:"qsInternetEdit"},{name:"qsWirelessSetting"},{name:"qsSummary"},{name:"qsCloudAndTether"}],"isSupportSetPort":function(){return!0===r.device.getConfig().supportSelectPort},"isAutoUpdate":function(){return r.device.getConfig().supportAutoUpdate},"updateSteps":function(n){u.each(i.steps,function(e,t){t&&t.name===n&&i.setStep(n)})},"getPhysicalConnStatus":function(){return l},"checkPhysicalConn":function(t){i.isSupportSetPort()?r.ajax.request({proxy:"portConnectionProxy",success:function(e){var n="2500WAN"===a.quickSetupModel.wanPortStatus.getValue()?1:2,s=!1;u.map(e,function(e){for(key in e)if(/wan/.test(key)&&/\d/.test(key)){var t=parseInt(/\d/.exec(key)[0]);n===t&&/status/.test(key)&&(s="CONNECTED"===e[key].toUpperCase())}}),l=s,t&&t(l)},fail:function(){l=!1,t&&t(!1)},error:function(){l=!1,t&&t(!1)}}):r.ajax.request({proxy:"physicalConnectionProxy",success:function(e){l=!("UNPLUGGED"===e.internet_status.toUpperCase()),t&&t(l)},fail:function(){l=!1,t&&t(!1)},error:function(){l=!1,t&&t(!1)}})},"currentStep":null,"_getChildModuleLoader":function(e){return t.quickSetupView[e+"Loader"]},"onStartSetPwd":function(){t.quickSetupView.steps.hide()},"onEndSetPwd":function(){t.quickSetupView.steps.show()},"setStep":function(e){t.quickSetupView.steps.setValue(e)},"initModeSelectModule":function(){r.moduleLoader.load({module:"quickSetup"},{module:"operationMode",view:"operationModeViewQs"},t.quickSetupView.operationModeLoader)},"goTo":function(e,t,n){i.currentStep&&i._getChildModuleLoader(i.currentStep).hide();var s=i._getChildModuleLoader(e);0<=u.inArray(e,p)||(r.moduleLoader.load({module:"quickSetup"},{module:e},s,function(){document.querySelector(".page-content-container").scrollTop=0,o.main.hideMask(),n&&n()}),t||p.push(e)),s.show(),document.querySelector(".page-content-container").scrollTop=0,i.currentStep=e,i.updateSteps(e)},showModule:function(e){i.currentStep&&i._getChildModuleLoader(i.currentStep).hide(),i._getChildModuleLoader(e).show(),document.querySelector(".page-content-container").scrollTop=0,i.currentStep=e,i.updateSteps(e)},"quit":function(){o.navigatorController.goTo("index")},"getQuickSetupData":function(){return a.quickSetupModel.getData()},submitAutoUpdateData:function(e){var t="on"==a.quickSetupModel.autoUpdate.getValue()?/^autoUpdate/:/^autoUpdate$/;return i.skipFlag?a.quickSetupModel.toggleFields(/^wireless/,!1):a.quickSetupModel.toggleFields(!1),a.quickSetupModel.toggleFields(t,!0),a.quickSetupModel.submit(e)},"submitQuickSetupData":function(e){return a.quickSetupModel.toggleFields(!0),a.quickSetupModel.toggleFields(/^wireless/,!1),a.quickSetupModel.toggleFields(/^autoUpdate/,!1),i.isSupportSetPort()||a.quickSetupModel.toggleFields(/^wanPortStatus/,!1),a.quickSetupModel.submit(e)},submitQsWirelssData:function(e){a.quickSetupModel.toggleFields(/^wireless/,!0),a.quickSetupModel.toggleFields(function(e){if(!/^wireless/.test(e))return!0},!1),r.device.getIsTriband()||a.quickSetupModel.toggleFields(function(e){if(/^wireless5g2/.test(e))return!0},!1),this.preloadSummary(function(){a.quickSetupModel.submit(e||{success:function(){i.goTo("qsSummary")}})})},submitAllData:function(e){a.quickSetupModel.toggleFields(/^autoUpdate/,!1),i.isSupportSetPort()||a.quickSetupModel.toggleFields(/^wanPortStatus/,!1),r.device.getIsTriband()||a.quickSetupModel.toggleFields(/^wireless5g2/,!1),this.preloadSummary(function(){a.quickSetupModel.submit(e||{success:function(){i.goTo("qsSummary")}})})},preloadSummary:function(e){r.moduleLoader.load({module:"quickSetup"},{module:"qsSummary"},t.quickSetupView.qsSummaryLoader,function(){e&&e()}),p.push("qsSummary")},preLoadCloudAndTether:function(e){p.push("qsCloudAndTether"),r.moduleLoader.load({module:"quickSetup"},{module:"qsCloudAndTether"},t.quickSetupView.qsCloudAndTetherLoader,function(){e&&e()})},detectUpgradeLv:function(t){t||(t=i.skipUpgrade),r.ajax.request({proxy:"onlineUpgradeProxy",data:{operation:"read"},success:function(e){i.upgradeDetail=e.detail.replace(/\\\\/g,"&#92;").replace(/\\n/g,"<br>"),e.latest_flag?t():i.goTo("qsFwUpgrade")},fail:t,error:t})},skipUpgrade:function(){i.upgradeState="noUpgrade",i.submitQsWirelssData({success:function(){i.goTo("qsSummary")}})}}})}(jQuery),$.su.modelManager.define("quickSetupModel",{type:"model",fields:[{name:"regionCountry",mapping:"region_country"},{name:"ispSpecialCfgChanged",mapping:"isp_special_cfg_changed"},{name:"ispSpecialEnable",mapping:"isp_special_enable"},{name:"ispSpecialIgmpEnable",mapping:"isp_special_igmp_enable"},{name:"ispSpecialIgmpSnoopingEnable",mapping:"isp_special_igmp_snooping_enable"},{name:"ispSpecialIgmpVersion",mapping:"isp_special_igmp_version"},{name:"ispSpecialInternetTag",mapping:"isp_special_internet_tag"},{name:"ispSpecialInternetVid",mapping:"isp_special_internet_vid"},{name:"ispSpecialInternetVprio",mapping:"isp_special_internet_vprio"},{name:"ispSpecialIpphoneVid",mapping:"isp_special_ipphone_vid"},{name:"ispSpecialIpphoneVprio",mapping:"isp_special_ipphone_vprio"},{name:"ispSpecialIptvVid",mapping:"isp_special_iptv_vid"},{name:"ispSpecialIptvVprio",mapping:"isp_special_iptv_vprio"},{name:"ispSpecialMciptvEnable",mapping:"isp_special_mciptv_enable"},{name:"ispSpecialMciptvVid",mapping:"isp_special_mciptv_vid"},{name:"ispSpecialMciptvVprio",mapping:"isp_special_mciptv_vprio"},{name:"ispSpecialMcwifiEnable",mapping:"isp_special_mcwifi_enable"},{name:"ispSpecialMode",mapping:"isp_special_mode"},{name:"ispSpecialQosIptvCompatible",mapping:"isp_special_qos_iptv_compatible"},{name:"ispSpecialWaitTime",mapping:"isp_special_wait_time"},{name:"ispSpecialPorttype",mapping:"isp_special_porttype"},{name:"networkAutodetect",mapping:"network_autodetect"},{name:"networkConntype",mapping:"network_conntype"},{name:"networkDhcpConnStatus",mapping:"network_dhcp_conn_status"},{name:"networkDhcpConntype",mapping:"network_dhcp_conntype"},{name:"networkDhcpDnsMode",mapping:"network_dhcp_dns_mode"},{name:"networkDhcpDynPridns",mapping:"network_dhcp_dyn_pridns"},{name:"networkDhcpDynSnddns",mapping:"network_dhcp_dyn_snddns"},{name:"networkDhcpGateway",mapping:"network_dhcp_gateway"},{name:"networkDhcpHostname",mapping:"network_dhcp_hostname"},{name:"networkDhcpIpaddr",mapping:"network_dhcp_ipaddr"},{name:"networkDhcpLinkStatus",mapping:"network_dhcp_link_status"},{name:"networkDhcpMacCloneType",mapping:"network_dhcp_mac_clone_type"},{name:"networkDhcpMacCustom",mapping:"network_dhcp_mac_custom"},{name:"networkDhcpManualPridns",mapping:"network_dhcp_manual_pridns"},{name:"networkDhcpManualSnddns",mapping:"network_dhcp_manual_snddns"},{name:"networkDhcpMtu",mapping:"network_dhcp_mtu"},{name:"networkDhcpNetmask",mapping:"network_dhcp_netmask"},{name:"networkDhcpPppshare",mapping:"network_dhcp_pppshare"},{name:"networkDhcpPriDns",mapping:"network_dhcp_pri_dns"},{name:"networkDhcpSndDns",mapping:"network_dhcp_snd_dns"},{name:"networkDhcpUnicast",mapping:"network_dhcp_unicast"},{name:"networkL2tpConnMode",mapping:"network_l2tp_conn_mode"},{name:"networkL2tpConnStatus",mapping:"network_l2tp_conn_status"},{name:"networkL2tpConntype",mapping:"network_l2tp_conntype"},{name:"networkL2tpDemandIdle",mapping:"network_l2tp_demand_idle"},{name:"networkL2tpDynGateway",mapping:"network_l2tp_dyn_gateway"},{name:"networkL2tpDynIp",mapping:"network_l2tp_dyn_ip"},{name:"networkL2tpDynNetmask",mapping:"network_l2tp_dyn_netmask"},{name:"networkL2tpDynPridns",mapping:"network_l2tp_dyn_pridns"},{name:"networkL2tpDynServer",mapping:"network_l2tp_dyn_server"},{name:"networkL2tpDynSnddns",mapping:"network_l2tp_dyn_snddns"},{name:"networkL2tpInetIp",mapping:"network_l2tp_inet_ip"},{name:"networkL2tpInetPridns",mapping:"network_l2tp_inet_pridns"},{name:"networkL2tpInetSnddns",mapping:"network_l2tp_inet_snddns"},{name:"networkL2tpLinkStatus",mapping:"network_l2tp_link_status"},{name:"networkL2tpManualIdle",mapping:"network_l2tp_manual_idle"},{name:"networkL2tpMtu",mapping:"network_l2tp_mtu"},{name:"networkL2tpPassword",mapping:"network_l2tp_password"},{name:"networkL2tpPppshare",mapping:"network_l2tp_pppshare"},{name:"networkL2tpSndConn",mapping:"network_l2tp_snd_conn"},{name:"networkL2tpStaticGateway",mapping:"network_l2tp_static_gateway"},{name:"networkL2tpStaticIp",mapping:"network_l2tp_static_ip"},{name:"networkL2tpStaticNetmask",mapping:"network_l2tp_static_netmask"},{name:"networkL2tpStaticPridns",mapping:"network_l2tp_static_pridns"},{name:"networkL2tpStaticServer",mapping:"network_l2tp_static_server"},{name:"networkL2tpStaticSnddns",mapping:"network_l2tp_static_snddns"},{name:"networkL2tpUsername",mapping:"network_l2tp_username"},{name:"networkPppoeUsername",mapping:"network_pppoe_username"},{name:"networkPppoeAccess",mapping:"network_pppoe_access"},{name:"networkPppoeConnMode",mapping:"network_pppoe_conn_mode"},{name:"networkPppoeConnStatus",mapping:"network_pppoe_conn_status"},{name:"networkPppoeConntype",mapping:"network_pppoe_conntype"},{name:"networkPppoeDemandIdle",mapping:"network_pppoe_demand_idle"},{name:"networkPppoeDnsMode",mapping:"network_pppoe_dns_mode"},{name:"networkPppoeDynIp",mapping:"network_pppoe_dyn_ip"},{name:"networkPppoeDynNetmask",mapping:"network_pppoe_dyn_netmask"},{name:"networkPppoeDynPridns",mapping:"network_pppoe_dyn_pridns"},{name:"networkPppoeDynSnddns",mapping:"network_pppoe_dyn_snddns"},{name:"networkPppoeInetIp",mapping:"network_pppoe_inet_ip"},{name:"networkPppoeInetPridns",mapping:"network_pppoe_inet_pridns"},{name:"networkPppoeInetSnddns",mapping:"network_pppoe_inet_snddns"},{name:"networkPppoeInterval",mapping:"network_pppoe_interval"},{name:"networkPppoeIpMode",mapping:"network_pppoe_ip_mode"},{name:"networkPppoeLinkStatus",mapping:"network_pppoe_link_status"},{name:"networkPppoeManualIdle",mapping:"network_pppoe_manual_idle"},{name:"networkPppoeMtu",mapping:"network_pppoe_mtu"},{name:"networkPppoePassword",mapping:"network_pppoe_password"},{name:"networkPppoePppshare",mapping:"network_pppoe_pppshare"},{name:"networkPppoeServer",mapping:"network_pppoe_server"},{name:"networkPppoeSndConn",mapping:"network_pppoe_snd_conn"},{name:"networkPppoeSpecificIp",mapping:"network_pppoe_specific_ip"},{name:"networkPppoeStaticIp",mapping:"network_pppoe_static_ip"},{name:"networkPppoeStaticNetmask",mapping:"network_pppoe_static_netmask"},{name:"networkPppoeStaticPridns",mapping:"network_pppoe_static_pridns"},{name:"networkPppoeStaticSnddns",mapping:"network_pppoe_static_snddns"},{name:"networkPppoeTimeEnd",mapping:"network_pppoe_time_end"},{name:"networkPptpConnMode",mapping:"network_pptp_conn_mode"},{name:"networkPptpConnStatus",mapping:"network_pptp_conn_status"},{name:"networkPptpConntype",mapping:"network_pptp_conntype"},{name:"networkPptpDemandIdle",mapping:"network_pptp_demand_idle"},{name:"networkPptpDynGateway",mapping:"network_pptp_dyn_gateway"},{name:"networkPptpDynIp",mapping:"network_pptp_dyn_ip"},{name:"networkPptpDynNetmask",mapping:"network_pptp_dyn_netmask"},{name:"networkPptpDynPridns",mapping:"network_pptp_dyn_pridns"},{name:"networkPptpDynServer",mapping:"network_pptp_dyn_server"},{name:"networkPptpDynSnddns",mapping:"network_pptp_dyn_snddns"},{name:"networkPptpInetIp",mapping:"network_pptp_inet_ip"},{name:"networkPptpInetPridns",mapping:"network_pptp_inet_pridns"},{name:"networkPptpInetSnddns",mapping:"network_pptp_inet_snddns"},{name:"networkPptpLinkStatus",mapping:"network_pptp_link_status"},{name:"networkPptpManualIdle",mapping:"network_pptp_manual_idle"},{name:"networkPptpMtu",mapping:"network_pptp_mtu"},{name:"networkPptpPassword",mapping:"network_pptp_password"},{name:"networkPptpPppshare",mapping:"network_pptp_pppshare"},{name:"networkPptpSndConn",mapping:"network_pptp_snd_conn"},{name:"networkPptpStaticGateway",mapping:"network_pptp_static_gateway"},{name:"networkPptpStaticIp",mapping:"network_pptp_static_ip"},{name:"networkPptpStaticNetmask",mapping:"network_pptp_static_netmask"},{name:"networkPptpStaticPridns",mapping:"network_pptp_static_pridns"},{name:"networkPptpStaticServer",mapping:"network_pptp_static_server"},{name:"networkPptpStaticSnddns",mapping:"network_pptp_static_snddns"},{name:"networkPptpUsername",mapping:"network_pptp_username"},{name:"networkDsliteDynMode",mapping:"network_dslite_dynamic_mode"},{name:"networkDsliteAftrName",mapping:"network_dslite_AFTR_name"},{name:"networkStaticConnStatus",mapping:"network_static_conn_status"},{name:"networkStaticConntype",mapping:"network_static_conntype"},{name:"networkStaticGateway",mapping:"network_static_gateway"},{name:"networkStaticIpaddr",mapping:"network_static_ipaddr"},{name:"networkStaticLinkStatus",mapping:"network_static_link_status"},{name:"networkStaticMtu",mapping:"network_static_mtu"},{name:"networkStaticNetmask",mapping:"network_static_netmask"},{name:"networkStaticPppshare",mapping:"network_static_pppshare"},{name:"networkStaticPriDns",mapping:"network_static_pri_dns"},{name:"networkStaticSndDns",mapping:"network_static_snd_dns"},{name:"regionCapability",mapping:"region_capability"},{name:"regionRegionSelectPermission",mapping:"region_region_select_permission"},{name:"regionSupportSmartConnect",mapping:"region_support_smart_connect"},{name:"regionSupportWirelessSchedule",mapping:"region_support_wireless_schedule"},{name:"timeDate",mapping:"time_date"},{name:"timeDay",mapping:"time_day"},{name:"timeHour24Enable",mapping:"time_hour24_enable"},{name:"timeHour24Support",mapping:"time_hour24_support"},{name:"timeNtpSvr1",mapping:"time_ntp_svr1"},{name:"timeNtpSvr2",mapping:"time_ntp_svr2"},{name:"timeQuicksetup",mapping:"time_quicksetup"},{name:"timeTime",mapping:"time_time"},{name:"timeTimezone",mapping:"time_timezone",allowBlank:!1},{name:"timeType",mapping:"time_type"},{name:"wireType",mapping:"wire_type"},{name:"wirelessSmartEnable",mapping:"smart_connect_smart_enable"},{name:"wireless2gAirtimeFairness",mapping:"wireless_2g_airtime_fairness"},{name:"wireless2gChannel",mapping:"wireless_2g_channel"},{name:"wireless2gCurrentChannel",mapping:"wireless_2g_current_channel"},{name:"wireless2gDisabled",mapping:"wireless_2g_disabled"},{name:"wireless2gDisabledAll",mapping:"wireless_2g_disabled_all"},{name:"wireless2gEnable",mapping:"wireless_2g_enable"},{name:"wireless2gEncryPassword",mapping:"wireless_2g_encry_password"},{name:"wireless2gEncryption",mapping:"wireless_2g_encryption"},{name:"wireless2gExtinfo",mapping:"wireless_2g_extinfo"},{name:"wireless2gHtmode",mapping:"wireless_2g_htmode"},{name:"wireless2gHwmode",mapping:"wireless_2g_hwmode"},{name:"wireless2gMacaddr",mapping:"wireless_2g_macaddr"},{name:"wireless2gMuMimo",mapping:"wireless_2g_mu_mimo"},{name:"wireless2gPort",mapping:"wireless_2g_port"},{name:"wireless2gPskCipher",mapping:"wireless_2g_psk_cipher"},{name:"wireless2gPskKey",mapping:"wireless_2g_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wireless2gPskVersion",mapping:"wireless_2g_psk_version"},{name:"wireless2gServer",mapping:"wireless_2g_server"},{name:"wireless2gSsid",mapping:"wireless_2g_ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"wireless2gTxpower",mapping:"wireless_2g_txpower"},{name:"wireless2gWdsStatus",mapping:"wireless_2g_wds_status"},{name:"wireless2gWepFormat1",mapping:"wireless_2g_wep_format1"},{name:"wireless2gWepFormat2",mapping:"wireless_2g_wep_format2"},{name:"wireless2gWepFormat3",mapping:"wireless_2g_wep_format3"},{name:"wireless2gWepFormat4",mapping:"wireless_2g_wep_format4"},{name:"wireless2gWepKey1",mapping:"wireless_2g_wep_key1"},{name:"wireless2gWepKey2",mapping:"wireless_2g_wep_key2"},{name:"wireless2gWepKey3",mapping:"wireless_2g_wep_key3"},{name:"wireless2gWepKey4",mapping:"wireless_2g_wep_key4"},{name:"wireless2gWepMode",mapping:"wireless_2g_wep_mode"},{name:"wireless2gWepSelect",mapping:"wireless_2g_wep_select"},{name:"wireless2gWepType1",mapping:"wireless_2g_wep_type1"},{name:"wireless2gWepType2",mapping:"wireless_2g_wep_type2"},{name:"wireless2gWepType3",mapping:"wireless_2g_wep_type3"},{name:"wireless2gWepType4",mapping:"wireless_2g_wep_type4"},{name:"wireless2gWpaCipher",mapping:"wireless_2g_wpa_cipher"},{name:"wireless2gWpaKey",mapping:"wireless_2g_wpa_key"},{name:"wireless2gWpaVersion",mapping:"wireless_2g_wpa_version"},{name:"wireless2gWpsState",mapping:"wireless_2g_wps_state"},{name:"wireless5g2AirtimeFairness",mapping:"wireless_5g_2_airtime_fairness"},{name:"wireless5g2Channel",mapping:"wireless_5g_2_channel"},{name:"wireless5g2CurrentChannel",mapping:"wireless_5g_2_current_channel"},{name:"wireless5g2Disabled",mapping:"wireless_5g_2_disabled"},{name:"wireless5g2DisabledAll",mapping:"wireless_5g_2_disabled_all"},{name:"wireless5g2Enable",mapping:"wireless_5g_2_enable"},{name:"wireless5g2EncryPassword",mapping:"wireless_5g_2_encry_password"},{name:"wireless5g2Encryption",mapping:"wireless_5g_2_encryption"},{name:"wireless5g2regionEnable",mapping:"wireless_5g_2_region_enable"},{name:"wireless5g2Extinfo",mapping:"wireless_5g_2_extinfo"},{name:"wireless5g2Htmode",mapping:"wireless_5g_2_htmode"},{name:"wireless5g2Hwmode",mapping:"wireless_5g_2_hwmode"},{name:"wireless5g2Macaddr",mapping:"wireless_5g_2_macaddr"},{name:"wireless5g2MuMimo",mapping:"wireless_5g_2_mu_mimo"},{name:"wireless5g2Port",mapping:"wireless_5g_2_port"},{name:"wireless5g2PskCipher",mapping:"wireless_5g_2_psk_cipher"},{name:"wireless5g2PskKey",mapping:"wireless_5g_2_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wireless5g2PskVersion",mapping:"wireless_5g_2_psk_version"},{name:"wireless5g2Server",mapping:"wireless_5g_2_server"},{name:"wireless5g2Ssid",mapping:"wireless_5g_2_ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"wireless5g2Hidden",mapping:"wireless_5g_2_hidden"},{name:"wireless5g2Txpower",mapping:"wireless_5g_2_txpower"},{name:"wireless5g2WdsStatus",mapping:"wireless_5g_2_wds_status"},{name:"wireless5g2WepFormat1",mapping:"wireless_5g_2_wep_format1"},{name:"wireless5g2WepFormat2",mapping:"wireless_5g_2_wep_format2"},{name:"wireless5g2WepFormat3",mapping:"wireless_5g_2_wep_format3"},{name:"wireless5g2WepFormat4",mapping:"wireless_5g_2_wep_format4"},{name:"wireless5g2WepKey1",mapping:"wireless_5g_2_wep_key1"},{name:"wireless5g2WepKey2",mapping:"wireless_5g_2_wep_key2"},{name:"wireless5g2WepKey3",mapping:"wireless_5g_2_wep_key3"},{name:"wireless5g2WepKey4",mapping:"wireless_5g_2_wep_key4"},{name:"wireless5g2WepMode",mapping:"wireless_5g_2_wep_mode"},{name:"wireless5g2WepSelect",mapping:"wireless_5g_2_wep_select"},{name:"wireless5g2WepType1",mapping:"wireless_5g_2_wep_type1"},{name:"wireless5g2WepType2",mapping:"wireless_5g_2_wep_type2"},{name:"wireless5g2WepType3",mapping:"wireless_5g_2_wep_type3"},{name:"wireless5g2WepType4",mapping:"wireless_5g_2_wep_type4"},{name:"wireless5g2WpaCipher",mapping:"wireless_5g_2_wpa_cipher"},{name:"wireless5g2WpaKey",mapping:"wireless_5g_2_wpa_key"},{name:"wireless5g2WpaVersion",mapping:"wireless_5g_2_wpa_version"},{name:"wireless5g2WpsState",mapping:"wireless_5g_2_wps_state"},{name:"wireless5gAirtimeFairness",mapping:"wireless_5g_airtime_fairness"},{name:"wireless5gChannel",mapping:"wireless_5g_channel"},{name:"wireless5gCurrentChannel",mapping:"wireless_5g_current_channel"},{name:"wireless5gDisabled",mapping:"wireless_5g_disabled"},{name:"wireless5gDisabledAll",mapping:"wireless_5g_disabled_all"},{name:"wireless5gEnable",mapping:"wireless_5g_enable"},{name:"wireless5gEncryPassword",mapping:"wireless_5g_encry_password"},{name:"wireless5gEncryption",mapping:"wireless_5g_encryption"},{name:"wireless5gRegionEnable",mapping:"wireless_5g_region_enable"},{name:"wireless5gExtinfo",mapping:"wireless_5g_extinfo"},{name:"wireless5gHtmode",mapping:"wireless_5g_htmode"},{name:"wireless5gHwmode",mapping:"wireless_5g_hwmode"},{name:"wireless5gMacaddr",mapping:"wireless_5g_macaddr"},{name:"wireless5gMuMimo",mapping:"wireless_5g_mu_mimo"},{name:"wireless5gPort",mapping:"wireless_5g_port"},{name:"wireless5gPskCipher",mapping:"wireless_5g_psk_cipher"},{name:"wireless5gPskKey",mapping:"wireless_5g_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wireless5gPskVersion",mapping:"wireless_5g_psk_version"},{name:"wireless5gServer",mapping:"wireless_5g_server"},{name:"wireless5gSsid",mapping:"wireless_5g_ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"wireless5gTxpower",mapping:"wireless_5g_txpower"},{name:"wireless5gWdsStatus",mapping:"wireless_5g_wds_status"},{name:"wireless5gWepFormat1",mapping:"wireless_5g_wep_format1"},{name:"wireless5gWepFormat2",mapping:"wireless_5g_wep_format2"},{name:"wireless5gWepFormat3",mapping:"wireless_5g_wep_format3"},{name:"wireless5gWepFormat4",mapping:"wireless_5g_wep_format4"},{name:"wireless5gWepKey1",mapping:"wireless_5g_wep_key1"},{name:"wireless5gWepKey2",mapping:"wireless_5g_wep_key2"},{name:"wireless5gWepKey3",mapping:"wireless_5g_wep_key3"},{name:"wireless5gWepKey4",mapping:"wireless_5g_wep_key4"},{name:"wireless5gWepMode",mapping:"wireless_5g_wep_mode"},{name:"wireless5gWepSelect",mapping:"wireless_5g_wep_select"},{name:"wireless5gWepType1",mapping:"wireless_5g_wep_type1"},{name:"wireless5gWepType2",mapping:"wireless_5g_wep_type2"},{name:"wireless5gWepType3",mapping:"wireless_5g_wep_type3"},{name:"wireless5gWepType4",mapping:"wireless_5g_wep_type4"},{name:"wireless5gWpaCipher",mapping:"wireless_5g_wpa_cipher"},{name:"wireless5gWpaKey",mapping:"wireless_5g_wpa_key"},{name:"wireless5gWpaVersion",mapping:"wireless_5g_wpa_version"},{name:"wireless5gWpsState",mapping:"wireless_5g_wps_state"},{name:"wanPortStatus",mapping:"network_port_wan_port_status"},{name:"autoUpdate",mapping:"auto_upgrade_enable",defaultValue:"on"},{name:"autoUpdateTime",mapping:"auto_upgrade_time",defaultValue:3}],preventSuccessEvent:!0,preventErrorEvent:!0,convert:function(e){return"no"===e.time_quicksetup?(e.time_timezone="",e.auto_upgrade_enable=""):""===e.auto_upgrade_enable&&(e.auto_upgrade_enable="on"),e},serialize:function(e){var t={network_port_wan_port_status:"",region_country:"",time_timezone:"",network_conntype:"",isp_special_mode:"",isp_special_internet_vid:"",isp_special_internet_vprio:"",isp_special_ipphone_vid:"",isp_special_ipphone_vprio:"",isp_special_iptv_vid:"",isp_special_iptv_vprio:"",isp_special_internet_tag:"",isp_special_mciptv_enable:"",isp_special_mciptv_vid:"",isp_special_mciptv_vprio:"",isp_special_enable:"",isp_special_porttype:"",network_dhcp_mac_clone_type:"",network_dhcp_mac_custom:"",network_static_ipaddr:"",network_static_netmask:"",network_static_gateway:"",network_static_pri_dns:"",network_static_snd_dns:"",network_pppoe_username:"",network_pppoe_password:"",network_l2tp_username:"",network_l2tp_password:"",network_l2tp_snd_conn:"",network_l2tp_dyn_server:"",network_l2tp_static_server:"",network_l2tp_static_ip:"",network_l2tp_static_netmask:"",network_l2tp_static_gateway:"",network_l2tp_static_pridns:"",network_l2tp_static_snddns:"",network_pptp_username:"",network_pptp_password:"",network_pptp_snd_conn:"",network_pptp_dyn_server:"",network_pptp_static_server:"",network_pptp_static_ip:"",network_pptp_static_netmask:"",network_pptp_static_gateway:"",network_pptp_static_pridns:"",network_pptp_static_snddns:"",network_dslite_dynamic_mode:"",network_dslite_AFTR_name:"",smart_connect_smart_enable:"",wireless_2g_enable:"",wireless_2g_ssid:"",wireless_2g_encry_password:"",wireless_2g_psk_key:"",wireless_2g_psk_cipher:"",wireless_2g_psk_version:"",wireless_2g_encryption:"",wireless_2g_disabled_all:"",wireless_5g_enable:"",wireless_5g_ssid:"",wireless_5g_encry_password:"",wireless_5g_psk_key:"",wireless_5g_psk_cipher:"",wireless_5g_psk_version:"",wireless_5g_encryption:"",wireless_5g_region_enable:"",wireless_5g_disabled_all:"",wireless_5g_2_enable:"",wireless_5g_2_ssid:"",wireless_5g_2_encry_password:"",wireless_5g_2_psk_key:"",wireless_5g_2_psk_cipher:"",wireless_5g_2_psk_version:"",wireless_5g_2_encryption:"",wireless_5g_2_region_enable:"",wireless_5g_2_disabled_all:"",username:"",password:"",auto_upgrade_enable:"",auto_upgrade_time:""};for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n]),""!==t[n]&&null!==t[n]||delete t[n];return t},proxy:{url:$.su.url("/admin/quick_setup?form=quick_setup")}}),$.su.storeManager.define("workModeStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"},{name:"content"},{name:"checked"}],data:[{boxlabel:$.su.CHAR.QUICK_SETUP.ROUTER_MODE,value:"router",content:".router-mode-intro"},{boxlabel:$.su.CHAR.QUICK_SETUP.AP_MODE,value:"ap",content:".ap-mode-intro"}]}),$.su.storeManager.define("quickSetupSteps",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"},{name:"content"},{name:"checked"}],data:[{boxlabel:"Rooouter",value:"router",content:"#router-mode-intro"},{boxlabel:"Appp",value:"ap",content:"#ap-mode-intro"},{boxlabel:"Cli",value:"client",content:"#client-mode-intro"}]}),$.su.modelManager.define("qsSummaryModel",{type:"model",fields:[{name:"type"},{name:"timeZone"},{name:"date"},{name:"time"},{name:"connectionType"},{name:"ispProfile",convert:function(e){return{"ExStream":$.su.CHAR.NETWORK_IPTV.SINGAPORE_SINGTEL,"Unifi":$.su.CHAR.NETWORK_IPTV.MALAYSIA_UNIFI,"Maxis":$.su.CHAR.NETWORK_IPTV.MALAYSIA_MAXIS,"Maxis2":$.su.CHAR.NETWORK_IPTV.MALAYSIA_MAXIS2,"Vietnam":$.su.CHAR.NETWORK_IPTV.VIETNAM_VIETTEL,"MEO":$.su.CHAR.NETWORK_IPTV.PORTUGAL_MEO,"VDF":$.su.CHAR.NETWORK_IPTV.PORTUGAL_VODAFONE,"nbn":$.su.CHAR.NETWORK_IPTV.AUSTRALIA_NBN,"ufb":$.su.CHAR.NETWORK_IPTV.NEWZEALAND_UFB,"Bridge":$.su.CHAR.NETWORK_IPTV.BRIDGE,"Custom":$.su.CHAR.NETWORK_IPTV.CUSTOM,"none":$.su.CHAR.NETWORK_IPTV.NONE}[e]}}]}),$.su.define("physicalConnectionProxy",{extend:"IPFProxy",url:$.su.url("/admin/status?form=internet"),writeFilter:function(e){return $.extend({operation:"read"},e)}}),$.su.define("portConnectionProxy",{extend:"IPFProxy",preventSuccessEvent:!0,preventFailEvent:!0,url:$.su.url("/admin/status?form=router"),writeFilter:function(e){return $.extend({operation:"read"},e)}}),$.su.define("qsCheckInternetProxy",{extend:"IPFProxy",preventSuccessEvent:!0,preventFailEvent:!0,url:$.su.url("/admin/quick_setup?form=check_internet"),writeFilter:function(e){return $.extend({operation:"read"},e)}}),$.su.define("qsGetDeviceInfoProxy",{extend:"IPFProxy",url:$.su.url("/admin/cloud_account?form=get_deviceInfo"),preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0}),$.su.define("qsWanCableDetectProxy",{extend:"IPFProxy",url:$.su.url("/admin/status?form=wan_cable_match_stat"),preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0,writeFilter:function(e){return $.extend({operation:"read_match"},e)}}),$.su.define("qsDualNatDetectProxy",{extend:"IPFProxy",url:$.su.url("/admin/status?form=wan_dual_nat_state"),preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0,writeFilter:function(e){return $.extend({operation:"read"},e)}}),function(u){u.su.moduleManager.define("qsAutoUpdate",{deps:["quickSetup"],models:["quickSetupModel"],views:["qsAutoUpdateView"],stores:["autoUpdateStore","autoUpdateTimeStore"],services:["ajax","device"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){t.enableAutoUpdateData();for(var r=[],p=0;p<11;p++)r.push({name:p+":00AM to "+(p+2)+":00AM",value:p});r.push({name:"11:00AM to 1:00PM",value:11});for(p=0;p<11;p++)r.push({name:p+":00PM to "+(p+2)+":00PM",value:p+12});r.push({name:"11:00PM to 1:00AM",value:23}),i.autoUpdateTimeStore.loadData(r);var l=s.quickSetupModel.autoUpdate.getValue();"on"==l?n.qsAutoUpdateView.autoUpdateField.show():(n.qsAutoUpdateView.autoUpdateField.hide(),!l&&u("#qs-auto-update-next-step-btn").addClass("disabled"))}},init:function(n,s,i,e,a,t){this.control({"#qs-auto-update-next-step-btn":{"ev_button_click":function(){var e,t=i.quickSetupModel.autoUpdate.getValue();e="on"==t||"off"==t&&a.quickSetup.noInternet||a.quickSetup.skipFlag?n.skipUpgrade:a.quickSetup.detectUpgradeLv,s.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!0),a.quickSetup.submitAutoUpdateData({success:function(){s.qsAutoUpdateView.qsAutoUpdateBackBtn.enable(),e()},fail:function(){s.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)},error:function(){s.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)}})}},"#qs-auto-update-before-step-btn":{"ev_button_click":function(){a.quickSetup.skipFlag?a.quickSetup.isSupportSetPort()?a.quickSetup.goTo("qsSelectInternetPort"):a.quickSetup.goTo("qsChooseInternetType"):a.quickSetup.goTo("qsWirelessSetting")}}}),this.listen({"models.quickSetupModel.autoUpdate":{"ev_value_change":function(e,t){"on"==t?s.qsAutoUpdateView.autoUpdateField.show():s.qsAutoUpdateView.autoUpdateField.hide(),u("#qs-auto-update-next-step-btn").removeClass("disabled")}}})}},function(e,t,n,s,i,a){return{skipUpgrade:function(){i.quickSetup.upgradeState="noUpgrade",i.quickSetup.preloadSummary(function(){i.quickSetup.submitQsWirelssData({success:function(){t.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1),i.quickSetup.goTo("qsSummary")},fail:function(){t.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)},error:function(){t.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)}})})},enableAutoUpdateData:function(){n.quickSetupModel.autoUpdate.enable(),n.quickSetupModel.autoUpdateTime.enable()}}})}(jQuery),$.su.storeManager.define("autoUpdateStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"}],data:[{value:"on",boxlabel:$.su.CHAR.QUICK_SETUP.TURN_ON_AUTO},{value:"off",boxlabel:$.su.CHAR.QUICK_SETUP.NOT_NOW}]}),$.su.storeManager.define("autoUpdateTimeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[]}),jQuery.su.moduleManager.define("qsCheckPhysicalConn",{services:[],deps:["quickSetup"],stores:[],views:["qsCheckPhysicalConnView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){}},init:function(e,t,n,s,i,a){this.control({"#qs-check-physical-conn-button":{"ev_button_click":function(){i.quickSetup.checkPhysicalConn(function(e){e&&i.quickSetup.goTo("qsChooseInternetType")})}}}),this.listen()}},function(e,t,n,s,i,a){return{}}),function(p){p.su.moduleManager.define("qsChooseInternetType",{services:["moduleManager","moduleLoader","device"],deps:["quickSetup","main"],models:["qsInternetConnTypeDetectModel","quickSetupModel","ipv4Status","qsSummaryModel"],stores:["qsInternetConnTypeStore"],views:["qsChooseInternetTypeView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){i.qsInternetConnTypeStore.load({data:{operation:"read"},success:function(){s.quickSetupModel.networkConntype.loadItems(i.qsInternetConnTypeStore.getData())}}),t.checkPortConn(),t.initBtnView(),1==o.device.getConfig().supportSelectPort?n.qsChooseInternetTypeView.internetDisconnNote.setText(p.su.CHAR.QUICK_SETUP.INTERNET_DISCONNECT_NOTE_SEL):n.qsChooseInternetTypeView.internetDisconnNote.setText(p.su.CHAR.QUICK_SETUP.INTERNET_DISCONNECT_NOTE)}},init:function(n,t,s,e,i,a){var o={"dslite":p.su.CHAR.NETWORK_INTERNET.DSLITE_WARNING,"v6plus":p.su.CHAR.NETWORK_INTERNET.V6_PLUS_WARNING};this.configViews({id:"qsChooseInternetTypeView",items:[{id:"qs-disconnect1-img","img-src":n.setImageSrc("qs.qs",1)},{id:"qs-disconnect2-img","img-src":n.setImageSrc("qs.qs",2)}]}),this.control({"#qs-choose-internet-type-next-btn":{"ev_button_click":function(){var e=function(){s.qsSummaryModel.connectionType.setValue(s.quickSetupModel.networkConntype.getSelectedText()),n.goNext()},t=o[s.quickSetupModel.networkConntype.getValue()];t?i.main.confirm(n.getUnavialModuleHtml(t),e,null,p.su.CHAR.OPERATION.OK):e()}},"#qs-choose-internet-type-prev-btn":{"ev_button_click":function(){n.goBack()}},"#qs-choose-internet-auto-detect-btn":{"ev_button_click":function(){n.startDetectConnectType()}},"#qs-disconnect-retry-btn":{"ev_button_click":function(){t.qsChooseInternetTypeView.retryButton.loading(!0),i.quickSetup.checkPhysicalConn(function(e){t.qsChooseInternetTypeView.retryButton.loading(!1),e&&(s.ipv4Status.load({success:function(e){s.quickSetupModel.networkConntype.setValue(e.conntype)}}),t.qsChooseInternetTypeView.selectConnectTypePanel.show(),t.qsChooseInternetTypeView.internetDisconnectPanel.hide())})}},"#qs-port-disconnect-retry-btn":{"ev_button_click":function(){t.qsChooseInternetTypeView.retryPortButton.loading(!0),i.quickSetup.checkPhysicalConn(function(e){t.qsChooseInternetTypeView.retryPortButton.loading(!1),e&&(t.qsChooseInternetTypeView.selectConnectTypePanel.show(),t.qsChooseInternetTypeView.internetDisconnectPanel.hide())})}},"#qs-port-disconnect-back-btn":{"ev_button_click":function(){n.goBack()}},"#qs-disconnect-skip-btn":{"ev_button_click":function(){i.quickSetup.skipFlag=!0,s.qsSummaryModel.connectionType.setValue(s.quickSetupModel.networkConntype.getSelectedText()),i.quickSetup.goTo("qsWirelessSetting")}}}),this.listen({})}},function(i,a,o,e,n,r){i=this;return{internetType:null,detectInterval:null,firstDetectFlag:!1,getUnavialModuleHtml:function(e){for(var t=r.moduleManager.get("navigatorController").getV6DsliteHiddenName(),n=0,s=t.length,i="";n<s;n++)i+="<p>"+t[n]+"</p>";return e+i},initBtnView:function(){n.quickSetup.isSupportSetPort()?(p("#qs-port-disconnect-btn-container").removeClass("hidden"),p("#qs-disconnect-btn-container").addClass("hidden")):(p("#qs-disconnect-btn-container").removeClass("hidden"),p("#qs-port-disconnect-btn-container").addClass("hidden"))},goNext:function(){var e=o.quickSetupModel.networkConntype.getValue(),t=r.moduleManager.get("qsInternetEdit");o.quickSetupModel.networkConntype.setValue(e),t&&this.internetType!==e&&t.showInternetType(e),this.internetType=e,n.quickSetup.skipFlag=!1,n.quickSetup.goTo("qsInternetEdit")},goBack:function(){n.quickSetup.isSupportSetPort()?n.quickSetup.goTo("qsSelectInternetPort"):n.quickSetup.goTo("qsSetTimezone")},checkPortConn:function(){n.quickSetup.getPhysicalConnStatus()?(o.ipv4Status.load({success:function(e){o.quickSetupModel.networkConntype.setValue(e.conntype)}}),a.qsChooseInternetTypeView.selectConnectTypePanel.show(),a.qsChooseInternetTypeView.internetDisconnectPanel.hide()):(a.qsChooseInternetTypeView.selectConnectTypePanel.hide(),a.qsChooseInternetTypeView.internetDisconnectPanel.show())},startDetectConnectType:function(){var t=5e3,n=0,s=5;clearInterval(i.detectInterval),a.qsChooseInternetTypeView.autoDetectBtn.disable(),a.qsChooseInternetTypeView.autoDetectProcessbar.hide(),o.qsInternetConnTypeDetectModel.getProxy().detect({success:function(e){t=e.time,s=e.time/1e3,a.qsChooseInternetTypeView.autoDetectResult.hide(),a.qsChooseInternetTypeView.autoDetectProcessbar.show(),a.qsChooseInternetTypeView.autoDetectProcessbar.animate({duration:t,percentageStart:0,percentageEnd:100}),i.detectInterval=setInterval(function(){i.continueDetectConnectType({success:function(e){if("unplugged"===e.conntype)clearInterval(i.detectInterval),a.qsChooseInternetTypeView.autoDetectProcessbar.reset(),a.qsChooseInternetTypeView.autoDetectProcessbar.hide(),a.qsChooseInternetTypeView.autoDetectResult.setText(p.su.CHAR.BASIC_INTERNET.UNPLUGGED),a.qsChooseInternetTypeView.autoDetectResult.show();else if("none"===e.conntype)a.qsChooseInternetTypeView.autoDetectResult.setText(p.su.CHAR.QUICK_SETUP.NONE),s<=n&&(clearInterval(i.detectInterval),a.qsChooseInternetTypeView.autoDetectProcessbar.reset(),a.qsChooseInternetTypeView.autoDetectProcessbar.hide(),a.qsChooseInternetTypeView.autoDetectResult.show());else{clearInterval(i.detectInterval),a.qsChooseInternetTypeView.autoDetectProcessbar.reset(),a.qsChooseInternetTypeView.autoDetectProcessbar.hide();var t="";switch(e.conntype){case"dhcp":t=p.su.CHAR.QUICK_SETUP.DYNAMIC_IP;break;case"static":t=p.su.CHAR.QUICK_SETUP.STATIC_IP;break;case"pppoe":t=p.su.CHAR.QUICK_SETUP.PPPOE;break;case"l2tp":t=p.su.CHAR.QUICK_SETUP.L2TP;break;case"pptp":t=p.su.CHAR.QUICK_SETUP.PPTP;break;default:t=p.su.CHAR.QUICK_SETUP.NONE}a.qsChooseInternetTypeView.autoDetectResult.setText(t),a.qsChooseInternetTypeView.autoDetectResult.show(),o.quickSetupModel.networkConntype.setValue(e.conntype)}},fail:function(){s<=++n&&(clearInterval(i.detectInterval),a.qsChooseInternetTypeView.autoDetectProcessbar.reset(),a.qsChooseInternetTypeView.autoDetectProcessbar.hide(),a.qsChooseInternetTypeView.autoDetectBtn.enable())},error:function(){s<=++n&&(clearInterval(i.detectInterval),a.qsChooseInternetTypeView.autoDetectProcessbar.reset(),a.qsChooseInternetTypeView.autoDetectProcessbar.hide(),a.qsChooseInternetTypeView.autoDetectBtn.enable())}}),a.qsChooseInternetTypeView.autoDetectBtn.enable()},1e3)},fail:function(){a.qsChooseInternetTypeView.autoDetectBtn.enable()},error:function(){a.qsChooseInternetTypeView.autoDetectBtn.enable()}})},continueDetectConnectType:function(e){if(e)var t=e.success,n=e.fail,s=e.error;o.qsInternetConnTypeDetectModel.getProxy().read({success:function(e){t&&t(e)},fail:function(e){n&&n(e)},error:function(e){s&&s(e)}})},setImageSrc:function(e,t){return e+(t+(n.quickSetup.isSupportSetPort()?2:0))}}})}(jQuery),function(){$.su.modelManager.define("qsInternetConnTypeDetectModel",{type:"model",fields:[{name:"time"},{name:"conntype"}],proxy:"qsInternetConnTypeDetectProxy"}),$.su.define("qsInternetConnTypeDetectProxy",{extend:"IPFProxy",url:$.su.url("/admin/network?form=wan_autodetect"),api:{detect:{writeFilter:function(e){return $.extend({operation:"detect"},e)}},read:{writeFilter:function(e){return $.extend({operation:"read"},e)}}}});var a={"dhcp":{boxlabel:$.su.CHAR.QUICK_SETUP.DYNAMIC_IP,value:"dhcp",content:"<p>"+$.su.CHAR.QUICK_SETUP.DYNAMIC_INTRO+"</p>"},"static":{boxlabel:$.su.CHAR.QUICK_SETUP.STATIC_IP,value:"static",content:"<p>"+$.su.CHAR.QUICK_SETUP.STATIC_INTRO+"</p>"},"pppoe":{boxlabel:$.su.CHAR.QUICK_SETUP.PPPOE,value:"pppoe",content:"<p>"+$.su.CHAR.QUICK_SETUP.PPPOE_INTRO+"</p>"},"l2tp":{boxlabel:$.su.CHAR.QUICK_SETUP.L2TP,value:"l2tp",content:"<p>"+$.su.CHAR.QUICK_SETUP.L2TP_INTRO+"</p>"},"pptp":{boxlabel:$.su.CHAR.QUICK_SETUP.PPTP,value:"pptp",content:"<p>"+$.su.CHAR.QUICK_SETUP.PPTP_INTRO+"</p>"},"dslite":{boxlabel:$.su.CHAR.NETWORK_INTERNET.DSLITE,value:"dslite",content:"<p>"+$.su.CHAR.NETWORK_INTERNET.DSLITE_INTRO+"</p>"},"v6plus":{boxlabel:$.su.CHAR.NETWORK_INTERNET.V6_PLUS,value:"v6plus",content:"<p>"+$.su.CHAR.NETWORK_INTERNET.V6_PLUS_INTRO+"</p>"}};$.su.storeManager.define("qsInternetConnTypeStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"},{name:"content"},{name:"checked"}],data:[],convert:function(e){for(var t=[],n=e.length,s=0,i=null;s<n;s++)(i=a[e[s].value])&&t.push(i);return t},proxy:{url:$.su.url("/admin/network?form=wan_ipv4_protos")}})}(),jQuery.su.moduleManager.define("qsCloudAndTether",{services:["moduleLoader","moduleManager","ajax","device"],models:["quickSetupModel"],deps:["quickSetup","main"],views:["qsCloudAndTetherView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){n.qsCloudAndTetherView.wifisharing5g2.hide();var r=s.quickSetupModel.getData();t.goToTpLogin(),null!==r.wireless2gSsid&&this.syncWifiSharingData(r),"on"==r.wirelessSmartEnable&&(n.qsCloudAndTetherView.wifisharing5g1.hide(),n.qsCloudAndTetherView.wifisharing5g2.hide()),o.ajax.request({proxy:"firmwareProxy",method:"write",data:{upgraded:!1}}),a.main.upgraded=!1}},init:function(e,t,n,s,i,a){this.control({"#qs-quit-button":{"ev_button_click":function(){i.quickSetup.quit()}}}),this.listen({"models.quickSetupModel":{"ev_loaded":function(){var e=n.quickSetupModel.getData();this.syncWifiSharingData(e)}}})}},function(e,u,t,n,s,c){return{goToTpLogin:function(){c.moduleLoader.load({module:"qsCloudAndTether"},{module:"tpLinkCloud",view:"tpLinkCloudViewQs"},u.qsCloudAndTetherView.tpLoginLoader,function(){u.qsCloudAndTetherView.qsCloudBtnAndQrcode.show(),s.quickSetup.showModule("qsCloudAndTether"),c.moduleManager.get("tpLinkCloud").setMode("qs")})},showLoading:function(){s.main.showMask(),u.qsCloudAndTetherView.pageLoadingSd.show()},hideLoading:function(){s.main.hideMask(),u.qsCloudAndTetherView.pageLoadingSd.hide()},syncWifiSharingData:function(e){var t,n,s=e.wireless2gSsid;switch(e.wireless2gEncryption){case"psk":case"psk_sae":t=e.wireless2gPskKey,n=e.wireless2gEncryption;break;case"wpa":t=e.wireless2gWpaKey,n="wpa";break;case"wep":t=e.wireless2gWepKey1,n="wep";break;default:t="",n="none"}u.qsCloudAndTetherView.wifisharing24g.setValue({ssid:s,password:t,security:n});var i,a,o=e.wireless5gSsid;switch(e.wireless5gEncryption){case"psk":case"psk_sae":i=e.wireless5gPskKey,a=e.wireless5gEncryption;break;case"wpa":i=e.wireless5gWpaKey,a="wpa";break;case"wep":i=e.wireless5gWepKey1,a="wep";break;default:i="",a="none"}if(u.qsCloudAndTetherView.wifisharing5g1.setValue({ssid:o,password:i,security:a}),1==c.device.getConfig().isTriband){u.qsCloudAndTetherView.wifisharing5g2.show();var r,p,l=e.wireless5g2Ssid;switch(e.wireless5g2Encryption){case"psk":case"psk_sae":r=e.wireless5g2PskKey,p=e.wireless5g2Encryption;break;case"wpa":r=e.wireless5g2WpaKey,p="wpa";break;case"wep":r=e.wireless5g2WepKey1,p="wep";break;default:r="",p="none"}u.qsCloudAndTetherView.wifisharing5g2.setValue({ssid:l,password:r,security:p})}},showCloudEle:function(){u.qsCloudAndTetherView.qsSkipBtn.show(),u.qsCloudAndTetherView.qrcodeField.show()},hideCloudEle:function(){u.qsCloudAndTetherView.qsSkipBtn.hide(),u.qsCloudAndTetherView.qrcodeField.hide()},refreshTpLogin:function(){c.moduleManager.get("tpLinkCloud").init()}}}),function(o){o.su.moduleManager.define("qsDualNatDetect",{services:[],stores:["routerModeStore"],deps:["quickSetup"],models:["routerModeModel"],views:["qsDualNatDetectView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){s.routerModeModel.reset(),n.qsDualNatDetectView.qsNatIssueNextBtn.disable()}},init:function(e,s,t,n,i,a){this.control({"#issue-detected-next-btn":{"ev_button_click":function(){switch(s.qsDualNatDetectView.issueDetecedPanel.hide(),o(".issue-detected-btn-field").hide(),o(".fix-issue-btn-field").show(),t.routerModeModel.mode.getValue()){case"independent":s.qsDualNatDetectView.fixIssuePanel.hide(),s.qsDualNatDetectView.recommendPanel.show();break;case"combined":s.qsDualNatDetectView.recommendPanel.hide(),s.qsDualNatDetectView.fixIssuePanel.show()}}},"#issue-detected-none":{"ev_button_click":e.goNext},"#qs-fix-issue-next-step-btn":{"ev_button_click":e.goNext},"#qs-fix-issue-back-step-btn":{"ev_button_click":function(){s.qsDualNatDetectView.fixIssuePanel.hide(),s.qsDualNatDetectView.recommendPanel.hide(),s.qsDualNatDetectView.issueDetecedPanel.show(),o(".fix-issue-btn-field").hide(),o(".issue-detected-btn-field").show()}}}),this.listen({"models.routerModeModel.mode":{"ev_value_change":function(e,t,n){n||s.qsDualNatDetectView.qsNatIssueNextBtn.enable()}}})}},function(e,t,n,s,i,a){return{goNext:function(){"upgradeSucceed"!==i.quickSetup.upgradeState?i.quickSetup.cloudBindFlag||i.quickSetup.skipFlag||i.quickSetup.noInternet?i.quickSetup.quit():i.quickSetup.preLoadCloudAndTether():window.location.href="/"}}})}(jQuery),$.su.modelManager.define("routerModeModel",{type:"model",fields:[{name:"mode"}]}),$.su.storeManager.define("routerModeStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"},{name:"content"}],data:[{value:"independent",boxlabel:$.su.CHAR.QUICK_SETUP.INDEPENDENT_ROUTER,content:".dual-nat-independent"},{value:"combined",boxlabel:$.su.CHAR.QUICK_SETUP.COMBINED_ROUTER,content:".dual-nat-combined"}]}),function(o){o.su.moduleManager.define("qsFwUpgrade",{deps:["quickSetup"],services:["ajax","moduleLoader","moduleManager","device"],views:["qsFwUpgradeView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){this.showUpgradeInfo()}},init:function(e,t,n,s,i,a){this.control({".upgrade-btn":{"ev_button_click":function(){e.startUpgrade()}},".qs-skip-btn":{"ev_button_click":function(){sessionStorage.setItem("upgradeToken",localStorage.getItem("token")),i.quickSetup.upgradeState="noUpgrade",i.quickSetup.submitQsWirelssData()}}})}},function(e,n,t,s,i,a){return{showUpgradeInfo:function(){var e=i.quickSetup.upgradeDetail;n.qsFwUpgradeView.qsFwUpgradeTitle.show(),n.qsFwUpgradeView.upgradeNote1.setText(e),n.qsFwUpgradeView.upgradeNote3.setText(e),a.ajax.request({proxy:"upgradeReadProxy",method:"read",success:function(e){if(3==e.type){var t=o.su.CHAR.NETWORK_MAP.ROUTER;a.ajax.request({proxy:"qsGetDeviceInfoProxy",method:"read",ajax:{async:!1},success:function(e){t=e.model}}),n.qsFwUpgradeView.upgradeMsg3Notice.setText(o.su.CHAR.UPGRADE.NOTICE_IMPORTANT.replace("%model%",t)),n.qsFwUpgradeView.upgradeMsg3.show()}else 0!=e.type&&1!=e.type&&2!=e.type&&""!==e.type||n.qsFwUpgradeView.upgradeMsg1.show()},fail:i.quickSetup.skipUpgrade,error:i.quickSetup.skipUpgrade})},startUpgrade:function(){n.qsFwUpgradeView.upgradeMsg1.hide(),n.qsFwUpgradeView.upgradeMsg3.hide(),a.moduleLoader.load({module:"qsFwUpgrade"},{module:"firmware",view:"firmwareQsView"},n.qsFwUpgradeView.qsFirmwareUpgradeLoader,function(){var e=a.moduleManager.get("firmware");e.setMode("qs"),e.startOnlineUpgrade()})}}})}(jQuery),function(o){o.su.moduleManager.define("qsInternetConnection",{services:["ajax"],models:["quickSetupModel"],deps:["quickSetup","main","qsChooseInternetType"],views:["qsInternetConnectionView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){n.qsInternetConnectionView.creating.show(),this.startCreateInternetConn()}},init:function(e,t,n,s,i,a){this.configViews({id:"qsInternetConnectionView",items:[{id:"internet-conn-note",title:o.su.CHAR.QUICK_SETUP.TRY_FOLLOW,items:[{text:o.su.CHAR.QUICK_SETUP.TRY_1},{text:o.su.CHAR.QUICK_SETUP.TRY_2},{text:o.su.CHAR.QUICK_SETUP.TRY_3}]}]}),this.control({"#internet-create":{"ev_button_click":e.startCreateInternetConn},"#internet-create-go-back":{"ev_button_click":function(){i.quickSetup.goTo("qsChooseInternetType")}},"#internet-create-skip":{"ev_button_click":function(){i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):i.quickSetup.submitQsWirelssData()}}})}},function(n,s,e,t,i,a){n=this;return{checkInternetTime:9e4,startCreateInternetConn:function(){var e,t;s.qsInternetConnectionView.creating.show(),s.qsInternetConnectionView.mainContent.hide(),s.qsInternetConnectionView.creatingProgressbar.reset(),n.createInternetConn({success:function(){e=n.startCheckRouter(),o.when(e).then(function(){return t=n.startCheckInternet()}).done(function(){s.qsInternetConnectionView.creatingProgressbar.setValue(100),i.quickSetup.noInternet=!1,i.quickSetup.exitMsgNum=2,setTimeout(function(){n.startCheckCloud(function(){i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):i.quickSetup.detectUpgradeLv()})},1e3)}).fail(function(){i.quickSetup.noInternet=!0,n.showWarningPage()})},fail:function(){i.quickSetup.noInternet=!0,s.qsInternetConnectionView.creatingProgressbar.stop(),n.showWarningPage()},error:function(){e=n.startCheckRouter(),o.when(e).then(function(){return t=n.startCheckInternet()}).done(function(){s.qsInternetConnectionView.creatingProgressbar.setValue(100),i.quickSetup.noInternet=!1,i.quickSetup.exitMsgNum=2,setTimeout(function(){n.startCheckCloud(function(){i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):i.quickSetup.detectUpgradeLv(n.skipUpgrade)})},1e3)}).fail(function(){i.quickSetup.noInternet=!0,n.showWarningPage()})}}),s.qsInternetConnectionView.creatingProgressbar.animate({percentageStart:0,percentageEnd:100,duration:n.checkInternetTime,callback:function(){e.reject(),t&&t.reject()}})},startCheckCloud:function(e){var t=o.Deferred();n.checkCloud({success:function(e){i.quickSetup.cloudBindFlag=e.isbind,t.resolve()},fail:function(){i.quickSetup.cloudBindFlag=!1,t.resolve()},error:function(){i.quickSetup.cloudBindFlag=!1,t.resolve()}}),o.when(t).done(function(){e()})},showWarningPage:function(){s.qsInternetConnectionView.creating.hide(),s.qsInternetConnectionView.mainContent.show(),i.main.hideMask()},createInternetConn:function(e){var t,n;e&&(t=e.success,n=e.fail,errorCallback=e.error),i.quickSetup.submitQuickSetupData({success:function(e){setTimeout(function(){t&&t(e)},3e4)},fail:function(){setTimeout(function(){n&&n()},3e4)},error:function(){setTimeout(function(){errorCallback&&errorCallback()},3e4)}})},startCheckRouter:function(){var e=o.Deferred();return function t(){a.ajax.request({proxy:"checkRouterProxy",success:function(){e.resolve()},fail:function(){"pending"===e.state()&&setTimeout(t,1e3)},error:function(){"pending"===e.state()&&setTimeout(t,1e3)}})}(),e},startCheckInternet:function(){var t=o.Deferred();return function n(){a.ajax.request({proxy:"checkInternetProxy",success:function(e){t.resolve()},fail:function(e){"pending"===t.state()&&setTimeout(n,1e3)},error:function(e){"pending"===t.state()&&setTimeout(n,1e3)}})}(),t},checkCloud:function(e){if(e)var t=e.success,n=e.fail,s=e.error;a.ajax.request({proxy:"cloudBindStatusProxy",method:"read",success:function(e){t&&t(e)},fail:function(e){n&&n(e)},error:function(e){s&&s(e)}})},remindToConnect:function(e,t){"restart"===e?(this.finishProgress(),s.qsInternetConnectionView.qsConnectNote.setText(o.su.CHAR.QUICK_SETUP.PLEASE_CONNECT),n.remindMode="restart",i.main.startReboot(t,function(){localStorage&&localStorage.setItem("token",""),s.qsInternetConnectionView.summaryWarningMsg.show()},o.su.CHAR.FIRMWARE.UPGRADE_PROCESS_TIP)):s.qsInternetConnectionView.summaryWarningMsg.show(),i.main.hideMask()},finishProgress:function(){s.qsInternetConnectionView.creatingProgressbar.animate({percentageStart:66,percentageEnd:100,duration:1e3})}}})}(jQuery),function(o){o.su.moduleManager.define("qsInternetEdit",{services:["moduleLoader","moduleManager"],stores:[],deps:["quickSetup","qsChooseInternetType","internet","iptvVlanAdv"],models:["quickSetupModel"],views:["qsInternetEditView"],listeners:{"ev_on_launch":function(e,n,t,s,i,a,o){(n=this).loadIPTVModule(),o.moduleLoader.load({module:"qsInternetEdit"},{module:"internet",view:"internetViewQs"},t.qsInternetEditView.internetLoader,function(){var e=o.moduleManager.get("internet");e.setMode(e.MODE.QUICK_SETUP);var t=o.moduleManager.get("qsChooseInternetType").internetType;n.showInternetType(t)})}},init:function(n,s,e,t,i,a){this.control({"#qs-internet-edit-before-step-btn":{"ev_button_click":function(){i.quickSetup.goTo("qsChooseInternetType")}},"#qs-internet-edit-next-step-btn":{"ev_button_click":function(){var e=i.internet.syncQsData(),t=i.iptvVlanAdv.syncQsData();!1!==e&&t&&o.when(e).done(function(){n.detectLanOccupied()?(s.qsInternetEditView.qsInternetEditNormal.hide(),s.qsInternetEditView.qsInternetEditOccupied.show()):i.quickSetup.goTo("qsWirelessSetting")})}},"#qs-lan-occupied-back":{"ev_button_click":function(){s.qsInternetEditView.qsInternetEditNormal.show(),s.qsInternetEditView.qsInternetEditOccupied.hide()}},"#qs-lan-occupied-next":{"ev_button_click":function(){s.qsInternetEditView.qsLanOccupiedBtn.loading(),n.detectLanOccupied()||i.quickSetup.goTo("qsWirelessSetting"),s.qsInternetEditView.qsLanOccupiedBtn.loading(!1)}}}),this.listen()}},function(e,t,n,s,i,a){return{"showInternetType":function(e){a.moduleManager.get("internet").responseInternetTypeValueChange(e)},loadIPTVModule:function(){a.moduleLoader.load({module:"qsChooseInternetType"},{module:"iptvVlanAdv",view:"iptvVlanView"},t.qsInternetEditView.iptvLoader,function(){var e,t=a.moduleManager.get("iptvVlanAdv");t.setMode(t.MODE.QUICK_SETUP),"off"===n.quickSetupModel.ispSpecialEnable.getValue()&&(e="none"),t.startup(e)})},detectLanOccupied:function(){return!1}}})}(jQuery),jQuery.su.moduleManager.define("qsNetworkSelect",{services:[],stores:["networkSelectStore"],views:["qsNetworkSelectView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){i.networkSelectStore.load()}},init:function(e,t,n,s,i,a){this.control(),this.listen()}},function(e,t,n,s,i,a){return{}}),$.su.storeManager.define("networkSelectStore",{type:"store",fields:[{name:"wireType"},{name:"ssid"},{name:"signal"},{name:"mac"},{name:"security"}],convert:function(e){var n=[];return $.each(e.ap2g,function(e,t){t.wireType="2g",n.push(t)}),$.each(e.ap5g,function(e,t){t.wireType="5g",n.push(t)}),n},proxy:{url:"./data/quickset.scan.json",timeout:15e3}}),function(r){r.su.moduleManager.define("qsSelectInternetPort",{views:["qsSelectInternetPortView"],models:["quickSetupModel"],deps:["quickSetup"],services:["moduleManager","device"],stores:["portTypeStore","portTypeWithIllStore"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){r("#qs_internet_port").hide(),r("#qs_internet_port_with_ill_wrapper").hide(),!0===o.device.getConfig().supportGamingSelectPort?r("#qs_internet_port_with_ill_wrapper").show():r("#qs_internet_port").show()}},init:function(t,e,n,s,i,a){this.listen(),this.control({"#qs-port-before-step-btn":{"ev_button_click":function(){t.goBack()}},"#qs-port-next-step-btn":{"ev_button_click":function(){i.quickSetup.checkPhysicalConn(function(){var e=a.moduleManager.get("qsChooseInternetType");e&&e.checkPortConn(),t.goNext()})}}})}},function(e,t,n,s,i,a){return{goBack:function(){i.quickSetup.goTo("qsSetTimezone")},goNext:function(){i.quickSetup.goTo("qsChooseInternetType")}}})}(jQuery),function(r){r.su.moduleManager.define("qsSetPassword",{services:[],deps:["quickSetup"],models:["setPasswordModel","setPasswordModelControl","localLogin"],stores:[],views:["qsSetPasswordView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){t=this;a.quickSetup.trigger("ev_start_set_pwd"),n.qsSetPasswordView.setPwdConfirmBtn.disable(),s.localLogin.load({success:function(e){t.firstLoginKey=e.password}})}},init:function(t,n,e,s,i,a){this.control({"#set-pwd-confirm-btn":{"ev_button_click":function(e){t.comparePassword()&&t.doSetPassword({success:function(){i.quickSetup.trigger("ev_end_set_pwd"),i.quickSetup.goTo("qsChooseInternetType")}})}},"#password-textbox":{"ev_password_blur":function(e){t.comparePassword()?n.qsSetPasswordView.setPwdConfirmBtn.enable():n.qsSetPasswordView.setPwdConfirmBtn.disable()}},"#confirm-textbox":{"ev_password_blur":function(e){t.comparePassword()?n.qsSetPasswordView.setPwdConfirmBtn.enable():n.qsSetPasswordView.setPwdConfirmBtn.disable()}}}),this.listen({})}},function(n,o,s,e,t,i){n=this;return{firstLoginKey:[],comparePassword:function(){var e=s.setPasswordModel.password.getValue(),t=s.setPasswordModel.confirm.getValue();return!(!e||!t)&&(e===t?(s.setPasswordModel.confirm.setCorrect(),!0):(s.setPasswordModel.confirm.setError(r.su.CHAR.ERROR["00000080"]),!1))},doSetPassword:function(e){if(e){var a=e.success;e.fail}var t=s.setPasswordModel.password.doEncrypt(n.firstLoginKey);s.setPasswordModelControl.password.setValue(t),s.setPasswordModelControl.confirm.setValue(!0),s.setPasswordModelControl.getProxy().login({data:s.setPasswordModelControl.getData(),success:function(e){var t,n,s,i=e.stok||(t="12345",n=window.location.href,0<=(s=n.indexOf("stok="))&&(t=n.substring(s+5)),t);localStorage&&localStorage.setItem("token",i),a&&a()},fail:function(e){var t,n,s,i,a=e.data;switch(e.errorcode){case"user conflict":o.qsSetPasswordView.userConflictMsg.show();break;case"login failed":t=a.failureCount,s=(n=a.attemptsAllowed)+t,n<=t?(i=(i=r.su.CHAR.QUICK_SETUP.LOGIN_FAILED_COUNT.replace("%num1",t)).replace("%num2",n),o.qsSetPasswordView.loginFailMsg.setContent(i),o.qsSetPasswordView.loginFailMsg.show()):o.qsSetPasswordView.setPwdConfirmBtn.setError(r.su.CHAR.QUICK_SETUP.LOGIN_FAILED);break;case"exceeded max attempts":t=a.failureCount,s=(n=a.attemptsAllowed)+t,i=r.su.CHAR.ERROR["00000089"].replace("%num",s),o.qsSetPasswordView.maxAttemptsMsg.setContent(i),o.qsSetPasswordView.maxAttemptsMsg.show();break;case"have set":i=r.su.CHAR.ERROR["10000195"],o.qsSetPasswordView.haveSetMsg.show()}}})}}})}(jQuery),function(t){t.su.modelManager.define("setPasswordModel",{type:"model",fields:[{name:"password",maxLength:15,minLength:1,vtype:"ascii_visible",allowBlank:!1},{name:"confirm",maxLength:15,minLength:1,vtype:"ascii_visible",allowBlank:!1}]}),t.su.modelManager.define("setPasswordModelControl",{type:"model",fields:[{name:"password"},{name:"confirm"}],proxy:"setPasswordProxy"}),t.su.define("setPasswordProxy",{extend:"IPFProxy",url:t.su.url("/login?form=initial_login"),api:{login:{writeFilter:function(e){return t.extend({operation:"login"},e)}}}})}(jQuery),function(o){o.su.moduleManager.define("qsSetSystemTime",{deps:["quickSetup"],views:["qsSetSystemTimeView"],models:["quickSetupModel","qsSummaryModel"],stores:["timezoneStore","setSystemTimeTypeStore"],services:["time"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){n.qsSetSystemTimeView.qsSystemTimeField2.hide(),o.time.on("on_time_change",t.onTimeChange)},"ev_before_destroy":function(e,t){t.beforeDestroy()}},init:function(e,n,t,s,i,a){this.control({"#qs-set-time":{"click":function(e){n.qsSetSystemTimeView.qsSystemTimeField1.hide(),n.qsSetSystemTimeView.qsSystemTimeField2.show()}},"#qs-start-now-btn":{"ev_button_click":function(e){i.quickSetup.isSupportSetPort()?i.quickSetup.goTo("qsSelectInternetPort"):i.quickSetup.goTo("qsChooseInternetType")}}}),this.listen({"models.quickSetupModel.type":{"ev_value_change":function(e,t){n.qsSetSystemTimeView.qsSystemTimeType1.hide(),n.qsSetSystemTimeView.qsSystemTimeType2.hide(),n.qsSetSystemTimeView.qsSystemTimeType3.hide(),"pc"==t?n.qsSetSystemTimeView.qsSystemTimeType1.show():"auto"==t?n.qsSetSystemTimeView.qsSystemTimeType2.show():"manual"==t&&n.qsSetSystemTimeView.qsSystemTimeType3.show()}}})}},function(e,i,t,n,s,a){e=this;return{onTimeChange:function(e,t){var n=a.time.getHour24(),s=a.time.format(t,"yyyy-MM-dd HH:mm:ss",n);i.qsSetSystemTimeView.systemTime1.setText(s),i.qsSetSystemTimeView.systemTime2.setText(o.su.CHAR.QUICK_SETUP.WELCOME_NOTE_4.replace("%t",s))},beforeDestroy:function(){a.time.off("on_time_change",e.onTimeChange)}}})}(jQuery),$.su.storeManager.define("setSystemTimeTypeStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"}],data:[{value:"pc",boxlabel:$.su.CHAR.QUICK_SETUP.SYNC_WITH_DEVICE},{value:"auto",boxlabel:$.su.CHAR.QUICK_SETUP.SYNC_WITH_INTERNET},{value:"manual",boxlabel:$.su.CHAR.QUICK_SETUP.SET_IT_MYSELF}]}),jQuery.su.moduleManager.define("qsSetTimezone",{services:[],deps:["quickSetup"],models:["quickSetupModel","timeSettings","qsSummaryModel"],stores:["timezoneStore"],views:["qsSetTimezoneView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){}},init:function(e,t,n,s,i,a){this.control({"#set-tz-confirm-btn":{"ev_button_click":function(e){n.quickSetupModel.timeTimezone.validate()&&(n.qsSummaryModel.timeZone.setValue(n.quickSetupModel.timeTimezone.getText()),i.quickSetup.isSupportSetPort()?i.quickSetup.goTo("qsSelectInternetPort"):i.quickSetup.goTo("qsChooseInternetType"))}}}),this.listen({})}},function(e,t,n,s,i,a){return{}}),function(f){f.su.moduleManager.define("qsSummary",{services:["ajax","moduleManager","device"],models:["quickSetupModel","qsSummaryModel","iptvVlan"],deps:["quickSetup"],views:["qsSummaryView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){var r=a.quickSetup.getQuickSetupData(),p=r.wireType||"wired",l=a.quickSetup.noInternet,u=a.quickSetup.upgradeState,c=a.quickSetup.skipFlag,d=f.su.CHAR.QUICK_SETUP.TITLE1,_=f.su.CHAR.QUICK_SETUP.TITLE2,m=f.su.CHAR.QUICK_SETUP.DESCRIPT1,g=f.su.CHAR.QUICK_SETUP.DESCRIPT2,w=f.su.CHAR.QUICK_SETUP.DESCRIPT3,k=f.su.CHAR.QUICK_SETUP.DESCRIPT4,S=f.su.CHAR.QUICK_SETUP.DESCRIPT5,q=n.qsSummaryView.summaryPanel,y=n.qsSummaryView.qsSummaryDescription;if(n.qsSummaryView.qsSummaryWanCableNote.hide(),n.qsSummaryView.qsSummaryDualNatNote.hide(),o.device.getConfig().supportWanCableDetect&&o.ajax.request({proxy:"qsWanCableDetectProxy",success:function(e){"mismatch"==e.match_status&&n.qsSummaryView.qsSummaryWanCableNote.show()}}),o.device.getConfig().supportDualNatDetect&&o.ajax.request({proxy:"qsDualNatDetectProxy",success:function(e){"1"==e.wan_dual_nat&&(t.dualNatDetected=!0,n.qsSummaryView.qsSummaryDualNatNote.show())}}),o.device.getIsTriband()?(n.qsSummaryView.qsWireless5g2Cont.show(),s.quickSetupModel.wireless5gEnable.setLabelField(f.su.CHAR.WIRELESS_SETTINGS.MODE_5G1)):n.qsSummaryView.qsWireless5g2Cont.hide(),c||l)s.qsSummaryModel.connectionType.hide(),"wired"===p?(q.setTitle(_),y.setText(k)):(q.setTitle(_),y.setText(S));else switch(s.qsSummaryModel.connectionType.show(),u){case"noUpgrade":"wired"===p?(q.setTitle(d),y.setText(g)):(q.setTitle(d),y.setText(w));break;case"upgradeFailed":"wired"===p?(q.setTitle(_),y.setText(g)):(q.setTitle(_),y.setText(w));break;case"upgradeSucceed":q.setTitle(d),y.setText(m)}t.setQsSummary(),t.toggleIptvView(r),this.showPassword()}},init:function(e,s,t,n,i,a){this.control({"#summary-next-btn":{"ev_button_click":function(){s.qsSummaryView.qsSummaryNextBtn.loading(),f.when(e.checkRouterConnection()).done(function(){e.dualNatDetected?i.quickSetup.goTo("qsDualNatDetect"):"upgradeSucceed"!==i.quickSetup.upgradeState?i.quickSetup.cloudBindFlag||i.quickSetup.skipFlag||i.quickSetup.noInternet?(s.qsSummaryView.qsSummaryNextBtn.loading(!1),i.quickSetup.quit()):i.quickSetup.preLoadCloudAndTether():window.location.href="/"}).fail(function(){s.qsSummaryView.summaryPanel.hideTitle(),s.qsSummaryView.qsSummaryDescription.setText(f.su.CHAR.QUICK_SETUP.DESCRIPT6),s.qsSummaryView.qsSummaryNextBtn.loading(!1)})}}}),this.listen({"models.quickSetupModel.wanPortStatus":{"ev_value_change":function(e,t,n){s.qsSummaryView["ispSpecialLan4"].setLabelField("1000WAN"===t?f.su.CHAR.NETWORK_MAP.PORT_2500LAN:f.su.CHAR.NETWORK_MAP.PORT_1000LAN)}}})}},function(e,i,a,t,o,n){return{dualNatDetected:!1,toggleIptvView:function(e){"off"===e.ispSpecialEnable||o.quickSetup.skipFlag?i.qsSummaryView.iptvFieldset.hide():i.qsSummaryView.iptvFieldset.show()},setQsSummary:function(){if(a.iptvVlan.ports.getValue()){var e=a.iptvVlan.ports.getValue().split(" ");if(o.quickSetup.isSupportSetPort()){var t="1000WAN"===a.quickSetupModel.wanPortStatus.getValue()?f.su.CHAR.NETWORK_MAP.PORT_2500LAN:f.su.CHAR.NETWORK_MAP.PORT_1000LAN;i.qsSummaryView["ispSpecialLan4"].setLabelField(t),e.pop()}portTypeObj={"Internet":f.su.CHAR.NETWORK_IPTV.INTERNET,"IPTV":f.su.CHAR.NETWORK_IPTV.IPTV,"IP-Phone":f.su.CHAR.NETWORK_IPTV.VOLP,"Bridge":f.su.CHAR.NETWORK_IPTV.BRIDGE};for(var n=a.iptvVlan.porttype.getValue(),s=0;s<e.length;s++)i.qsSummaryView["ispSpecialLan"+(s+1)].setLabelField(f.su.CHAR.NETWORK_IPTV.LAN+e[s]),i.qsSummaryView["ispSpecialLan"+(s+1)].setValue(portTypeObj[n.split(" ")[s]]),i.qsSummaryView["ispSpecialLan"+(s+1)].show()}},showPassword:function(){var e=a.quickSetupModel,t=i.qsSummaryView;t.wireless2gEncryPassword.setValue(e.wireless2gPskKey.getValue()||f.su.CHAR.WIFI_SHARING.NO_PASSWORD),t.wireless5gEncryPassword.setValue(e.wireless5gPskKey.getValue()||f.su.CHAR.WIFI_SHARING.NO_PASSWORD),n.device.getIsTriband()&&t.wireless5g2EncryPassword.setValue(e.wireless5g2PskKey.getValue()||f.su.CHAR.WIFI_SHARING.NO_PASSWORD)},checkRouterConnection:function(){var e=f.Deferred();return n.ajax.request({proxy:"checkRouterProxy",success:function(){e.resolve()},fail:function(){e.resolve()},error:function(){e.reject()}}),e.promise()}}})}(jQuery),function(p){p.su.moduleManager.define("qsWirelessSetting",{deps:["quickSetup","qsChooseInternetType"],services:["device"],models:["quickSetupModel"],views:["qsWirelessSettingView"],listeners:{"ev_on_launch":function(e,t,n,s,i,a,o){a.quickSetup.getQuickSetupData();t.smartEnable="on",s.quickSetupModel.wirelessSmartEnable.setValue(t.smartEnable),"on"!==t.smartEnable?t.smartEnableOn():s.quickSetupModel.wireless2gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO)}},init:function(a,s,o,e,i,r){this.control({"#qs-wireless-before-step-btn":{"ev_button_click":function(){i.quickSetup.getPhysicalConnStatus()?i.qsChooseInternetType.goNext():i.quickSetup.goTo("qsChooseInternetType")}},"#qs-wireless-next-step-btn":{"ev_button_click":function(){var e=["wireless2gSsid","wireless2gPskKey"];"off"===o.quickSetupModel.wirelessSmartEnable.getValue()&&(e.push("wireless5gSsid","wireless5gPskKey"),r.device.getIsTriband()&&e.push("wireless5g2Ssid","wireless5g2PskKey"));for(var t=0,n=e.length;t<n;t++)if(!o.quickSetupModel[e[t]].validate())return;a.syncQsWirelessData(),i.quickSetup.skipFlag?i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):(s.qsWirelessSettingView.qsWirelessNextBtn.loading(),i.quickSetup.submitAllData()):i.quickSetup.goTo("qsInternetConnection",!0)}}}),this.listen({"models.quickSetupModel.wirelessSmartEnable":{"ev_value_change":function(e,t){"on"==t?(s.qsWirelessSettingView.qsWireless5g.hide(),s.qsWirelessSettingView.qsWirelessSetSeparately.hide(),o.quickSetupModel.wireless2gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO)):a.smartEnableOn()}},"models.quickSetupModel.wireless2gEnable":{"ev_value_change":function(e,t){s.qsWirelessSettingView.qsWirelessSetSeparately.getValue()||(o.quickSetupModel.wireless5gEnable.setValue(t),r.device.getIsTriband()&&o.quickSetupModel.wireless5g2Enable.setValue(t))}},"models.quickSetupModel.wireless2gSsid":{"ev_value_change":function(e,t){var n=s.qsWirelessSettingView.qsWirelessSetSeparately.getValue();""===t||n||(r.device.getIsTriband()?(o.quickSetupModel.wireless5gSsid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G":"_5G_1")),o.quickSetupModel.wireless5g2Ssid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G_Gaming":"_5G_2"))):o.quickSetupModel.wireless5gSsid.setValue(t+"_5G"))}},"models.quickSetupModel.wireless2gEncryption":{"ev_value_change":function(e,t){"psk_sae"==t?o.quickSetupModel.wireless2gPskKey.setVtype("wpa3_password"):o.quickSetupModel.wireless2gPskKey.setVtype("psk_password")}},"models.quickSetupModel.wireless2gPskKey":{"ev_value_change":function(e,t){var n=s.qsWirelessSettingView.qsWirelessSetSeparately.getValue();""===t||n||(o.quickSetupModel.wireless5gPskKey.setValue(t),r.device.getIsTriband()&&o.quickSetupModel.wireless5g2PskKey.setValue(t))}},"models.quickSetupModel.wireless5gEncryption":{"ev_value_change":function(e,t){"psk_sae"==t?o.quickSetupModel.wireless5gPskKey.setVtype("wpa3_password"):o.quickSetupModel.wireless5gPskKey.setVtype("psk_password")}},"models.quickSetupModel.wireless5g2Encryption":{"ev_value_change":function(e,t){"psk_sae"==t?o.quickSetupModel.wireless5g2PskKey.setVtype("wpa3_password"):o.quickSetupModel.wireless5g2PskKey.setVtype("psk_password")}},"views.qsWirelessSettingView.qsWirelessSetSeparately":{"ev_value_change":function(e,t){var n,s,i;t?(a.visualEnable5g(),r.device.getIsTriband()&&a.visualEnable5g2()):(a.visualDisable5g(),n=o.quickSetupModel.wireless2gEnable.getValue(),s=o.quickSetupModel.wireless2gSsid.getValue(),i=o.quickSetupModel.wireless2gPskKey.getValue(),o.quickSetupModel.wireless5gEnable.setValue(n),o.quickSetupModel.wireless5gPskKey.setValue(i),r.device.getIsTriband()?(o.quickSetupModel.wireless5gSsid.setValue(s+("gaming"==GLOBAL_STYLE?"_5G":"_5G_1")),a.visualDisable5g2(),o.quickSetupModel.wireless5g2Enable.setValue(n),o.quickSetupModel.wireless5g2Ssid.setValue(s+("gaming"==GLOBAL_STYLE?"_5G_Gaming":"_5G_2")),o.quickSetupModel.wireless5g2PskKey.setValue(i)):o.quickSetupModel.wireless5gSsid.setValue(s+"_5G"))}}})}},function(a,s,o,e,t,r){a=this;return{has5g1:function(){return!0},has5g2:function(){return!0},smartEnableOn:function(){o.quickSetupModel.wireless2gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_2G),s.qsWirelessSettingView.qsWireless5g.show(),s.qsWirelessSettingView.qsWirelessSetSeparately.show();var e=o.quickSetupModel.wireless2gEnable.getValue(),t=o.quickSetupModel.wireless2gSsid.getValue(),n=o.quickSetupModel.wireless2gPskKey.getValue();o.quickSetupModel.wireless5gEnable.setValue(e),o.quickSetupModel.wireless5gSsid.setValue(t+"_5G"),o.quickSetupModel.wireless5gPskKey.setValue(n),!s.qsWirelessSettingView.qsWirelessSetSeparately.getValue()&&a.visualDisable5g(),r.device.getIsTriband()?(o.quickSetupModel.wireless5gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_5G1),o.quickSetupModel.wireless5gSsid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G":"_5G_1")),s.qsWirelessSettingView.qsWireless5g2.show(),o.quickSetupModel.wireless5g2Enable.setValue(e),o.quickSetupModel.wireless5g2Ssid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G_Gaming":"_5G_2")),o.quickSetupModel.wireless5g2PskKey.setValue(n),!s.qsWirelessSettingView.qsWirelessSetSeparately.getValue()&&a.visualDisable5g2()):s.qsWirelessSettingView.qsWireless5g2.hide()},visualDisable5g:function(){o.quickSetupModel.wireless5gEnable.disable(!0),o.quickSetupModel.wireless5gSsid.disable(!0),o.quickSetupModel.wireless5gPskKey.disable(!0)},visualEnable5g:function(){o.quickSetupModel.wireless5gEnable.enable(),o.quickSetupModel.wireless5gSsid.enable(),o.quickSetupModel.wireless5gPskKey.enable()},visualDisable5g2:function(){o.quickSetupModel.wireless5g2Enable.disable(!0),o.quickSetupModel.wireless5g2Ssid.disable(!0),o.quickSetupModel.wireless5g2PskKey.disable(!0)},visualEnable5g2:function(){o.quickSetupModel.wireless5g2Enable.enable(),o.quickSetupModel.wireless5g2Ssid.enable(),o.quickSetupModel.wireless5g2PskKey.enable()},syncQsWirelessData:function(){var e=a.syncQsWireless2gData(),t=a.syncQsWireless5gData(),n=a.syncQsWireless5g2Data(),s=p.extend({},e,t,n);o.quickSetupModel.replaceData(s)},syncQsWireless2gData:function(){var e=o.quickSetupModel.getData().wireless2gEnable,t=a.syncPskConfig("2g"),n={wireless2gDisabledAll:"on"==e?"off":"on",wireless2gEncryption:t.encryption,wireless2gPskVersion:t.version,wireless2gPskCipher:t.cipher};return o.quickSetupModel.replaceData(n),n},syncQsWireless5gData:function(){var e=o.quickSetupModel.getData(),t=e.wirelessSmartEnable,n=e.wireless5gEnable,s={wireless5gRegionEnable:"on"};if("on"==t)s.wireless5gEnable=e.wireless2gEnable,s.wireless5gDisabledAll=e.wireless2gDisabledAll,s.wireless5gSsid=e.wireless2gSsid,s.wireless5gPskKey=e.wireless2gPskKey,s.wireless5gEncryption=e.wireless2gEncryption,s.wireless5gPskVersion=e.wireless2gPskVersion,s.wireless5gPskCipher=e.wireless2gPskCipher;else{var i=a.syncPskConfig("5g");s.wireless5gEncryption=i.encryption,s.wireless5gPskVersion=i.version,s.wireless5gPskCipher=i.cipher,s.wireless5gDisabledAll="on"==n?"off":"on"}return s},syncQsWireless5g2Data:function(){if(!r.device.getIsTriband())return{};var e=o.quickSetupModel.getData(),t=e.wirelessSmartEnable,n=e.wireless5g2Enable,s={wireless5gRegionEnable:"on"};if("on"==t)s.wireless5g2Enable=e.wireless2gEnable,s.wireless5g2DisabledAll=e.wireless2gDisabledAll,s.wireless5g2Ssid=e.wireless2gSsid,s.wireless5g2PskKey=e.wireless2gPskKey,s.wireless5g2Encryption=e.wireless2gEncryption,s.wireless5g2PskVersion=e.wireless2gPskVersion,s.wireless5g2PskCipher=e.wireless2gPskCipher;else{var i=a.syncPskConfig("5g2");s.wireless5g2Encryption=i.encryption,s.wireless5g2PskVersion=i.version,s.wireless5g2PskCipher=i.cipher,s.wireless5g2DisabledAll="on"==n?"off":"on"}return s},syncPskConfig:function(e){var t={},n=o.quickSetupModel.getData(),s="wireless2gEncryption".replace("2g",e),i="wireless2gPskVersion".replace("2g",e),a="wireless2gPskCipher".replace("2g",e);switch(n[s]){case"psk":case"psk_sae":t.encryption=n[s],t.version=n[i],t.cipher=n[a];break;default:t.encryption="psk",t.version="rsn",t.cipher="aes"}return t}}})}(jQuery);
!function(l){l.su.modelManager.define("sysLogModel",{type:"model",fields:[{name:"type"},{name:"level"}],proxy:{url:l.su.url("/admin/syslog?form=filter")}}),l.su.modelManager.define("runningTimeModel",{type:"model",fields:[{name:"runningTime",mapping:"running_time"}],proxy:{url:"./data/runningTime.json"},convert:function(e){return{running_time:function(e){var n=e;if(e=parseInt(e,10),isNaN(e))return n;var a="",r=parseInt(e/86400,10),t=parseInt(e%86400/3600,10),i=parseInt(e%3600/60,10);return 1===r?a=a+r+" "+l.su.CHAR.NETWORK_MAP.DAY+" ":1<r&&(a=a+r+" "+l.su.CHAR.NETWORK_MAP.DAYS+" "),0<t&&(a=a+t+" "+l.su.CHAR.NETWORK_MAP.H+" "),a=a+i+" "+l.su.CHAR.NETWORK_MAP.MIN}(e.running_time)}}}),l.su.modelManager.define("saveLogModel",{type:"model",fields:[{name:"from",vtype:"email",allowBlank:!1,minLength:6,maxLength:128},{name:"auth"},{name:"username",mapping:"user",minLength:1,maxLength:96,vtype:"string_visible",allowBlank:!1},{name:"password",showLevel:!1,minLength:1,maxLength:32,vtype:"string_visible",allowBlank:!1},{name:"smtpServer",mapping:"smtp_server",allowBlank:!1,vtype:"string_ip_domain"},{name:"to",vtype:"email",allowBlank:!1,minLength:6,maxLength:128},{name:"autoMail",mapping:"auto_mail"},{name:"autoMailType",mapping:"auto_mail_type"},{name:"everyDayTime",mapping:"every_day_time"},{name:"everyHours",mapping:"every_hours",defaultValue:24,vtype:{vtype:"number",min:1,max:24}},{name:"mailAgain",mapping:"mail_again",defaultValue:3600,disabled:!0}],convert:function(e){var n=l.extend({},e),a=parseInt(n.mail_again,10);if(isNaN(a))n.mail_again="";else{var r=Math.floor(a/3600),t=Math.floor(a%3600/60);n.mail_again=l.su.CHAR.SYSTEM_LOG.MAIL_AGAIN_TIME.replace("%hour%",r).replace("%minute%",t)}return n},proxy:{url:l.su.url("/admin/syslog?form=mail")}}),l.su.storeManager.define("logTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],proxy:{url:l.su.url("/admin/syslog?form=types")},convert:function(e){for(var n,a=0,r=e.length;a<r;a++)(n=l.su.CHAR.SYSTEM_LOG[e[a].name])&&(e[a].name=n);return e}}),l.su.storeManager.define("sysLogStore",{type:"store",fields:[{name:"time"},{name:"level"},{name:"type"},{name:"content"}],proxy:{url:l.su.url("/admin/syslog?form=log")}}),l.su.storeManager.define("frequencyStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"selected"}],data:[{name:l.su.CHAR.SYSTEM_LOG.EVERY_DAY,value:"day_time",selected:!0},{name:l.su.CHAR.SYSTEM_LOG.AFTER_INTERVAL,value:"hours"}]}),l.su.define("sendMailProxy",{extend:"IPFProxy",preventSuccessEvent:!0,url:l.su.url("/admin/syslog?form=log"),writeFilter:function(e){return l.extend({operation:"mail"},e)}}),l.su.define("saveLogProxy",{extend:"IPFProxy",api:{upload:{url:l.su.url("/admin/syslog?form=save_log"),preventSuccessEvent:!0,data:{"operation":"save"}}}})}(jQuery);